{
  "version": 3,
  "sources": ["../../../src/js/modules/notifications.mjs"],
  "sourcesContent": ["// Lightweight toast/notification helpers, loaded on demand\n\nfunction createNotificationElement(message, primaryButtonText, secondaryButtonText, primaryAction) {\n  const notification = document.createElement('div');\n  notification.className = 'notification-toast';\n  notification.setAttribute('role', 'alert');\n  notification.setAttribute('aria-live', 'polite');\n\n  notification.innerHTML = `\n        <div class=\"notification-content\">\n            <p>${message}</p>\n            <div class=\"notification-actions\">\n                <button class=\"primary-action\">${primaryButtonText}</button>\n                <button class=\"secondary-action\">${secondaryButtonText}</button>\n            </div>\n        </div>\n    `;\n\n  notification.querySelector('.primary-action').addEventListener('click', () => {\n    try {\n      primaryAction();\n    } catch (err) {\n      console.error('Primary action failed:', err);\n    }\n    notification.remove();\n  });\n\n  notification.querySelector('.secondary-action').addEventListener('click', () => {\n    notification.remove();\n  });\n\n  return notification;\n}\n\nfunction showNotification(notificationElement) {\n  const existingNotification = document.querySelector('.notification-toast');\n  if (existingNotification) {\n    existingNotification.remove();\n  }\n  document.body.appendChild(notificationElement);\n  setTimeout(() => {\n    if (document.body.contains(notificationElement)) {\n      notificationElement.remove();\n    }\n  }, 5 * 60 * 1000);\n}\n\nfunction safeReload() {\n  try {\n    if (typeof window === 'undefined') return;\n    const ua = window.navigator && window.navigator.userAgent || '';\n    // Avoid jsdom virtual console noise: jsdom advertises itself in UA\n    if (/jsdom/i.test(ua)) return;\n    const reloadFn = window.location && window.location.reload;\n    if (typeof reloadFn === 'function') {\n      reloadFn.call(window.location);\n    }\n  } catch {}\n}\n\nexport function showUpdateNotification(serviceWorker, message = 'Una versi\u00F3n est\u00E1 disponible') {\n  const notification = createNotificationElement(\n    message,\n    'Actualizar ahora',\n    'Despu\u00E9s',\n    () => {\n      if (serviceWorker) {\n        serviceWorker.postMessage({ type: 'SKIP_WAITING' });\n      } else {\n        safeReload();\n      }\n    }\n  );\n  showNotification(notification);\n}\n\nexport function showServiceWorkerError(message) {\n  const notification = createNotificationElement(\n    message,\n    'Reload',\n    'Dismiss',\n    () => safeReload()\n  );\n  showNotification(notification);\n}\n\nexport function showConnectivityNotification(message) {\n  const notification = createNotificationElement(\n    message,\n    'Retry',\n    'Dismiss',\n    () => safeReload()\n  );\n  showNotification(notification);\n}\n\nexport {\n  createNotificationElement,\n  showNotification\n};\n"],
  "mappings": "4BAEA,SAASA,EAA0BC,EAASC,EAAmBC,EAAqBC,EAAe,CACjG,IAAMC,EAAe,SAAS,cAAc,KAAK,EACjD,OAAAA,EAAa,UAAY,qBACzBA,EAAa,aAAa,OAAQ,OAAO,EACzCA,EAAa,aAAa,YAAa,QAAQ,EAE/CA,EAAa,UAAY;AAAA;AAAA,iBAEVJ,CAAO;AAAA;AAAA,iDAEyBC,CAAiB;AAAA,mDACfC,CAAmB;AAAA;AAAA;AAAA,MAKpEE,EAAa,cAAc,iBAAiB,EAAE,iBAAiB,QAAS,IAAM,CAC5E,GAAI,CACFD,EAAc,CAChB,OAASE,EAAK,CACZ,QAAQ,MAAM,yBAA0BA,CAAG,CAC7C,CACAD,EAAa,OAAO,CACtB,CAAC,EAEDA,EAAa,cAAc,mBAAmB,EAAE,iBAAiB,QAAS,IAAM,CAC9EA,EAAa,OAAO,CACtB,CAAC,EAEMA,CACT,CAEA,SAASE,EAAiBC,EAAqB,CAC7C,IAAMC,EAAuB,SAAS,cAAc,qBAAqB,EACrEA,GACFA,EAAqB,OAAO,EAE9B,SAAS,KAAK,YAAYD,CAAmB,EAC7C,WAAW,IAAM,CACX,SAAS,KAAK,SAASA,CAAmB,GAC5CA,EAAoB,OAAO,CAE/B,EAAG,IAAS,GAAI,CAClB,CAEA,SAASE,GAAa,CACpB,GAAI,CACF,GAAI,OAAO,QAAW,YAAa,OACnC,IAAMC,EAAK,OAAO,WAAa,OAAO,UAAU,WAAa,GAE7D,GAAI,SAAS,KAAKA,CAAE,EAAG,OACvB,IAAMC,EAAW,OAAO,UAAY,OAAO,SAAS,OAChD,OAAOA,GAAa,YACtBA,EAAS,KAAK,OAAO,QAAQ,CAEjC,OAAQC,EAAA,CAAC,CACX,CAEO,SAASC,EAAuBC,EAAed,EAAU,oCAA+B,CAC7F,IAAMI,EAAeL,EACnBC,EACA,mBACA,aACA,IAAM,CACAc,EACFA,EAAc,YAAY,CAAE,KAAM,cAAe,CAAC,EAElDL,EAAW,CAEf,CACF,EACAH,EAAiBF,CAAY,CAC/B,CAEO,SAASW,EAAuBf,EAAS,CAC9C,IAAMI,EAAeL,EACnBC,EACA,SACA,UACA,IAAMS,EAAW,CACnB,EACAH,EAAiBF,CAAY,CAC/B,CAEO,SAASY,EAA6BhB,EAAS,CACpD,IAAMI,EAAeL,EACnBC,EACA,QACA,UACA,IAAMS,EAAW,CACnB,EACAH,EAAiBF,CAAY,CAC/B",
  "names": ["createNotificationElement", "message", "primaryButtonText", "secondaryButtonText", "primaryAction", "notification", "err", "showNotification", "notificationElement", "existingNotification", "safeReload", "ua", "reloadFn", "e", "showUpdateNotification", "serviceWorker", "showServiceWorkerError", "showConnectivityNotification"]
}
