import{a as Fe,b as D}from"./chunks/chunk-TXIFLR42.js";import"./chunks/chunk-72ZECFVW.js";function je(){try{let e=document.createElement("style");window&&window.__CSP_NONCE__&&e.setAttribute("nonce",window.__CSP_NONCE__),e.textContent=`
      /* Miniatura del carrito (mantener consistente con base/enhanced CSS) */
      .cart-item-thumb { width: 100px; height: 100px; flex-shrink: 0; }
      .cart-item-thumb img, .cart-item-thumb-img { width: 100%; height: 100%; object-fit: cover; border-radius: 0.25rem; }

      /* Contornos de enfoque claros para accesibilidad */
      .navbar .nav-link:focus,
      .navbar .dropdown-item:focus {
        outline: 2px solid var(--primary-color);
        outline-offset: 2px;
      }

      /* Espaciado entre botones en el offcanvas del carrito */
      #cartOffcanvas .offcanvas-body > .btn + .btn { margin-top: 0.5rem !important; }
    `,document.head.appendChild(e)}catch(e){console.warn("[modules/enhancements] injectEnhancementStyles error:",e)}}function ze(){try{document.addEventListener("keydown",t=>{t.key==="Tab"&&document.body.classList.add("keyboard-navigation")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")});let e=document.createElement("style");window&&window.__CSP_NONCE__&&e.setAttribute("nonce",window.__CSP_NONCE__),e.textContent=".keyboard-navigation *:focus { outline: 2px solid var(--primary-color); outline-offset: 2px; }",document.head.appendChild(e)}catch(e){console.warn("[modules/a11y] setupNavigationAccessibility error:",e)}}function $t(e){if(!e)return[];let t=["a[href]","area[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]'];return Array.from(e.querySelectorAll(t.join(","))).filter(n=>{if(!(n instanceof HTMLElement))return!1;let o=window.getComputedStyle(n);return o.visibility!=="hidden"&&o.display!=="none"})}function Ue(){try{let C=function(){f(),o&&typeof o.focus=="function"?o.focus():n&&typeof n.focus=="function"&&n.focus()},e=document.getElementById("cartOffcanvas");if(!e)return;let t=e.querySelector("#cartOffcanvasLabel"),n=document.getElementById("cart-icon"),o=null,c=!1,d=g=>{if(g.key==="Escape"&&e.dataset.bsFallback==="1"){g.preventDefault(),e.classList.remove("show"),e.setAttribute("aria-hidden","true"),C();return}if(g.key!=="Tab")return;let E=$t(e);if(!E.length){g.preventDefault();return}let S=E[0],x=E[E.length-1],j=document.activeElement;g.shiftKey?(j===S||!e.contains(j))&&(g.preventDefault(),x.focus()):j===x&&(g.preventDefault(),S.focus())},m=()=>{c||(e.addEventListener("keydown",d),c=!0)},f=()=>{c&&(e.removeEventListener("keydown",d),c=!1)},p=()=>{t instanceof HTMLElement&&typeof t.focus=="function"?t.focus():e.focus()};e.addEventListener("show.bs.offcanvas",()=>{o=document.activeElement instanceof HTMLElement?document.activeElement:null,m()}),e.addEventListener("shown.bs.offcanvas",()=>{p()}),e.addEventListener("hidden.bs.offcanvas",()=>{C()}),e.addEventListener("click",g=>{let E=g.target instanceof HTMLElement?g.target:null;!E||!E.closest('[data-bs-dismiss="offcanvas"]')||e.dataset.bsFallback==="1"&&(g.preventDefault(),e.classList.remove("show"),e.setAttribute("aria-hidden","true"),C())})}catch(e){console.warn("[modules/a11y] setupCartOffcanvasAccessibility error:",e)}}function Re(){try{"loading"in HTMLImageElement.prototype&&document.querySelectorAll("img:not([loading])").forEach(e=>{e.loading="lazy"})}catch(e){console.warn("[modules/perf] setupPerformanceOptimizations error:",e)}}var R="__PRODUCT_DATA__";function Ft(){try{if(typeof window=="undefined")return null;let e=window[R];if(e&&Array.isArray(e.products))return e.products}catch(e){console.warn("[modules/seo] Unable to read shared product data:",e)}return null}function jt(e,t={}){var o,c;if(typeof window=="undefined"||!Array.isArray(e))return;let n=window[R]||{};window[R]={...n,products:e,version:(c=(o=t.version)!=null?o:n.version)!=null?c:null,updatedAt:t.updatedAt||Date.now(),source:t.source||n.source||"seo"}}function He(e=[]){let t={};return e.forEach(n=>{let o=n.id||String(n.name)+"-"+String(n.category);t[o]=n}),t}function We(){if(typeof window=="undefined")return;let e=window[R]||{};e.structuredDataInjected||(window[R]={...e,structuredDataInjected:!0})}async function zt(){try{let e=Ft();if(e)return He(e);let t=localStorage.getItem("productDataVersion"),n=t?`/data/product_data.json?v=${encodeURIComponent(t)}`:"/data/product_data.json",o=await fetch(n,{cache:"no-store",headers:{Accept:"application/json"}});if(!o.ok)return null;let c=await o.json(),d=Array.isArray(c==null?void 0:c.products)?c.products:Array.isArray(c)?c:[];return jt(d,{version:(c==null?void 0:c.version)||t||null,source:"seo-fallback"}),He(d)}catch(e){return console.error("[modules/seo] Error loading product data:",e),null}}async function Ve(){try{if(document.querySelector('script[type="application/ld+json"]')){We();return}let e=typeof window!="undefined"?window[R]:null;if(e!=null&&e.structuredDataInjected)return;let t=await zt();if(!t)return;let o=Object.values(t).slice(0,20).map(m=>({"@type":"Product",name:m.name,image:m.image_path,description:m.description,brand:m.brand||"Gen\xE9rico",offers:{"@type":"Offer",price:m.price,priceCurrency:"CLP",availability:m.stock?"https://schema.org/InStock":"https://schema.org/OutOfStock"}})),c={"@context":"https://schema.org","@graph":[{"@type":"Store",name:"El Rinc\xF3n de \xC9bano",image:"https://elrincondeebano.com/assets/images/web/logo.webp",description:"Un minimarket en la puerta de tu departamento",address:{"@type":"PostalAddress",addressCountry:"CL"},telephone:"+56951118901",url:"http://www.elrincondeebano.com/",contactPoint:{"@type":"ContactPoint",telephone:"+56-951118901",contactType:"customer service"}},...o]},d=document.createElement("script");d.type="application/ld+json",window&&window.__CSP_NONCE__&&d.setAttribute("nonce",window.__CSP_NONCE__),d.textContent=JSON.stringify(c),document.head.appendChild(d),We()}catch(e){console.error("[modules/seo] Error generating structured data:",e)}}function Ke(){try{if(!document.querySelector('link[rel="canonical"]')){let e=document.createElement("link");e.rel="canonical",e.href=location.origin+location.pathname,document.head.appendChild(e)}if(!document.querySelector('meta[name="description"]')){let e=document.createElement("meta");e.name="description",e.content="El Rinc\xF3n de \xC9bano - Minimarket con delivery instant\xE1neo.",document.head.appendChild(e)}}catch(e){console.warn("[modules/seo] injectSeoMetadata error:",e)}}function Ge(){try{if(!document.querySelector('link[rel="manifest"]')){let e=document.createElement("link");e.rel="manifest",e.href="/app.webmanifest",document.head.appendChild(e)}}catch(e){console.warn("[modules/pwa] injectPwaManifest error:",e)}}function Ye(){var e;try{(e=window==null?void 0:window.console)!=null&&e.debug&&console.debug("[modules/checkout] setupCheckoutProgress: no-op")}catch(t){}}var oe=new WeakMap,pe=new Set,Je=new Set,Ut=typeof window!="undefined"&&typeof window.requestAnimationFrame=="function"?window.requestAnimationFrame.bind(window):e=>setTimeout(e,16),Ze=typeof window!="undefined"&&typeof window.cancelAnimationFrame=="function"?window.cancelAnimationFrame.bind(window):e=>clearTimeout(e);function Rt(e){if(typeof e.composedPath=="function")return e.composedPath();let t=[],n=e.target;for(;n;)t.push(n),n=n.parentNode;return typeof window!="undefined"&&t.push(window),t.push(document),t}function Ht(e,t,n){var d;if(!e)return`${t}-${n}`;if(typeof e.id=="string"&&e.id.trim().length>0)return`id:${e.id}`;let o=(d=e.dataset)==null?void 0:d.dropdownId;if(o)return o;let c=`${t}:${n}`;return e.dataset&&(e.dataset.dropdownId=c),c}function me(e,t){let{toggle:n,menu:o,dropdownNode:c}=e;n.classList.toggle("show",t),n.setAttribute("aria-expanded",t?"true":"false"),o&&o.classList.toggle("show",t),c&&c.classList.toggle("show",t)}function Y(e){e.expandedId=null,e.toggles.forEach(t=>{me(t,!1)})}function Wt(e){if(e.outsideListenerInstalled)return;e.outsideListenerInstalled=!0;let t=!1,n=()=>{document.addEventListener("pointerdown",e.onPointerDownOutside,!0),t=!0};e.outsideListenerCleanup=()=>{e.installTimer!==null&&(clearTimeout(e.installTimer),e.installTimer=null),t&&(document.removeEventListener("pointerdown",e.onPointerDownOutside,!0),t=!1),e.outsideListenerInstalled=!1},e.installTimer=setTimeout(()=>{e.installTimer=null,n()},0)}function fe(e,t,n){if(!(e.button!==void 0&&e.button!==0)){if(t.preventNavigation&&n.toggle.tagName==="A"&&e.preventDefault(),e.stopPropagation(),typeof e.stopImmediatePropagation=="function"&&e.stopImmediatePropagation(),t.justOpened=!0,t.justOpenedFrame!==null&&Ze(t.justOpenedFrame),t.justOpenedFrame=Ut(()=>{t.justOpened=!1,t.justOpenedFrame=null}),Wt(t),t.expandedId===n.id){Y(t);return}Y(t),me(n,!0),t.expandedId=n.id}}function Vt(e,t,n){let o=e.key;o==="Enter"||o===" "||o==="Spacebar"?(e.preventDefault(),fe(e,t,n)):o==="Escape"&&(Y(t),n.toggle.focus())}function Qe(){return typeof performance!="undefined"&&typeof performance.now=="function"?performance.now():Date.now()}function Kt(e,t){let n=e.closest(".dropdown"),o=n==null?void 0:n.querySelector(".dropdown-menu"),c=Ht(e,"auto",t),d={toggle:e,menu:o,dropdownNode:n,id:c,lastPointerTime:0};return o&&!o.id&&(o.id=`${c}-menu`),o&&e.setAttribute("aria-controls",o.id),d}function Gt(e){let t={container:e,toggles:[],expandedId:null,justOpened:!1,justOpenedFrame:null,outsideListenerInstalled:!1,outsideListenerCleanup:null,installTimer:null,onPointerDownOutside:null,preventNavigation:!0};return t.onPointerDownOutside=o=>{t.justOpened||Rt(o).includes(t.container)||Y(t)},Array.from(e.querySelectorAll(".dropdown-toggle")).forEach((o,c)=>{if(o.dataset.menuControllerBound==="1")return;o.dataset.menuControllerBound="1";let d=Kt(o,c);t.toggles.push(d);let m=C=>{d.lastPointerTime=Qe(),fe(C,t,d)},f=C=>{if(Qe()-(d.lastPointerTime||0)<250){C.preventDefault(),C.stopPropagation(),typeof C.stopImmediatePropagation=="function"&&C.stopImmediatePropagation();return}fe(C,t,d)},p=C=>Vt(C,t,d);o.addEventListener("pointerdown",m),o.addEventListener("click",f),o.addEventListener("keydown",p),d.cleanup=()=>{o.removeEventListener("pointerdown",m),o.removeEventListener("click",f),o.removeEventListener("keydown",p),delete o.dataset.menuControllerBound}}),oe.set(e,t),pe.add(e),Je.add(t),t.toggles.length===0?(Yt(t),null):t}function Yt(e){e&&(e.toggles.forEach(t=>{var n;me(t,!1),(n=t.cleanup)==null||n.call(t)}),e.toggles=[],Y(e),e.outsideListenerCleanup&&(e.outsideListenerCleanup(),e.outsideListenerCleanup=null),e.justOpenedFrame!==null&&(Ze(e.justOpenedFrame),e.justOpenedFrame=null),e.container&&(oe.delete(e.container),pe.delete(e.container)),Je.delete(e))}function Xe({container:e}={}){if(typeof document=="undefined")return;let t;if(e)t=[e];else{let n=Array.from(document.querySelectorAll("#navbar-container"));t=n.length>0?n:Array.from(document.querySelectorAll(".navbar, nav"))}t.forEach(n=>{if(!(n instanceof HTMLElement)||n.querySelectorAll(".dropdown-toggle").length===0||oe.get(n))return;Gt(n)||(oe.delete(n),pe.delete(n))})}var et=!1,tt=new Map,ge=null,he=null;function nt(e){if(e&&typeof e=="object"){if(e.default)return e.default;let t=Object.keys(e);if(t.length===1)return e[t[0]]}return e}function rt(e,t){return!e||!t?null:typeof e.getOrCreateInstance=="function"?e.getOrCreateInstance(t):new e(t)}function Qt(e){return e?typeof e=="string"?document.querySelector(e):e:null}function ot(e,t){return tt.has(e)?tt.get(e)():t()}async function Jt(){ge||(ge=ot("collapse",()=>import("./chunks/collapse-5AVOIS7J.js")));let e=await ge;return nt(e)}async function Zt(){he||(he=ot("offcanvas",()=>import("./chunks/offcanvas-7MPV3VGN.js")));let e=await he;return nt(e)}function Xt(){document.querySelectorAll('[data-bs-toggle="collapse"][data-bs-target]').forEach(t=>{t.addEventListener("click",n=>{tn(t)&&n.preventDefault(),typeof n.stopImmediatePropagation=="function"&&n.stopImmediatePropagation(),n.stopPropagation(),en(t,n)})})}async function en(e,t){var n;try{let o=e.getAttribute("data-bs-target");if(!o)return;let c=document.querySelector(o);if(!c)return;let d=await Jt(),m=rt(d,c);(n=m==null?void 0:m.toggle)==null||n.call(m,t)}catch(o){console.error("No se pudo inicializar el Collapse de Bootstrap",o)}}function tn(e){if(!e||e.tagName!=="A")return!1;let t=e.getAttribute("href");return!t||t==="#"}function at(){et||(et=!0,typeof document!="undefined"&&(Xt(),Xe()))}async function it(e){if(typeof document=="undefined")throw new Error("Offcanvas no disponible en este entorno");let t=Qt(e);if(!t)throw new Error("No se encontr\xF3 el elemento de Offcanvas");let n=await Zt(),o=rt(n,t);if(!o||typeof o.show!="function")throw new Error("Instancia de Offcanvas inv\xE1lida");return o.show(),o}function Q(e,t={}){let n=e.startsWith("/")?e:"/"+e,o=Object.entries(t).map(([d,m])=>`${d}=${m}`).join(","),c=n.split("/").map(encodeURIComponent).join("/");return`/cdn-cgi/image/${o}${c}`}var J={fit:"cover",quality:75,format:"auto"};var pt="__PRODUCT_DATA__",ae=null,L=Object.freeze({hidden:"is-hidden",flex:"is-flex",block:"is-block",contentVisible:"has-content-visibility",containIntrinsic:"has-contain-intrinsic"});function Se(){if(typeof window!="undefined"){let e=window[pt];if(e&&Array.isArray(e.products))return e}return ae&&Array.isArray(ae.products)?ae:null}function mt(e,t={},{force:n=!1}={}){if(!Array.isArray(e))return null;let o={products:e,version:t.version||null,source:t.source||null,updatedAt:t.updatedAt||Date.now(),isPartial:!!t.isPartial,total:typeof t.total=="number"?t.total:null},c=Se();if(c&&!n){let d=c.version||null,m=o.version||null;if(!m&&d||!m&&!d||m&&d===m)return c}return ae=o,typeof window!="undefined"&&(window[pt]={...o}),o}function ve(e,t={}){return mt(e,t,{force:!1})}function nn(e,t={}){return mt(e,t,{force:!0})}var Ce={path:"/service-worker.js",scope:"/",updateCheckInterval:300*1e3},rn=new Set(["localhost","127.0.0.1","::1","[::1]"]);function st(e){var t,n;if(typeof window=="undefined")return null;try{let o=(n=(t=window.localStorage)!=null?t:globalThis.localStorage)!=null?n:null;return o?o.getItem(e):null}catch(o){return console.warn("Unable to access localStorage for key",e,o),null}}function on(){var o,c,d,m;if(typeof window=="undefined")return!1;if(st("ebano-sw-disabled")==="true")return console.info("Service worker registration skipped by kill-switch flag."),!1;let t=(c=(o=window.location)==null?void 0:o.hostname)!=null?c:"";if(rn.has(t)){let f=st("ebano-sw-enable-local"),p=(m=(d=window.location)==null?void 0:d.search)!=null?m:"",C=typeof p=="string"&&/(?:^|[?&])sw=on(?:&|$)/i.test(p);return f==="true"||C?!0:(console.info("Service worker registration skipped on localhost. Set localStorage ebano-sw-enable-local=true to override."),!1)}return!0}var ct=!1;function gt(){if(!("serviceWorker"in navigator)){console.warn("Service workers are not supported in this browser");return}if(!on()||ct)return;ct=!0;let e=async()=>{if(document.readyState==="complete"){window.removeEventListener("load",e);try{await an()}catch(t){console.error("Service Worker initialization failed:",t),fn("Failed to initialize service worker. Some features may not work offline.")}}};window.addEventListener("load",e),e()}async function an(){try{let e=await navigator.serviceWorker.register(Ce.path,{scope:Ce.scope});console.log("ServiceWorker registered successfully:",e.scope),sn(e),cn(e),ln(),dn()}catch(e){throw console.error("ServiceWorker registration failed:",e),e}}function sn(e){e.addEventListener("updatefound",()=>{let t=e.installing;t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&t.postMessage({type:"SKIP_WAITING"})})})}function cn(e){lt(e),setInterval(()=>{lt(e)},Ce.updateCheckInterval)}async function lt(e){var t;try{await e.update();let n=await fetch("/data/product_data.json",{cache:"no-store",headers:{Accept:"application/json"}});if(n.ok){let c=(await n.json()).version,d=localStorage.getItem("productDataVersion");c!==d&&((t=e.active)==null||t.postMessage({type:"INVALIDATE_PRODUCT_CACHE"}),localStorage.setItem("productDataVersion",c),un(null,"New product data available"))}}catch(n){console.warn("Update check failed:",n)}}function ln(){let e=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{e||(e=!0,window.location.reload())})}function dn(){let e=document.getElementById("offline-indicator");if(!e)return;let t=()=>{let n=navigator.onLine;e.classList.toggle(L.hidden,n),e.classList.toggle(L.block,!n),n||pn("You are currently offline. Some features may be limited.")};window.addEventListener("online",t),window.addEventListener("offline",t),navigator.onLine||t()}var ye=null;function Ie(){return ye||(ye=import("./chunks/notifications-533VS4FV.js")),ye}function un(e,t="Una versi\xF3n est\xE1 disponible"){Ie().then(n=>n.showUpdateNotification(e,t))}function fn(e){Ie().then(t=>t.showServiceWorkerError(e))}function pn(e){Ie().then(t=>t.showConnectivityNotification(e))}typeof navigator!="undefined"&&"serviceWorker"in navigator&&gt();var mn=e=>typeof e=="object"&&e!==null||typeof e=="function",we=()=>({map:new Map,weakMap:new WeakMap,hasValue:!1,value:void 0}),gn=(e,t=100)=>{if(typeof e!="function")throw new TypeError("Expected a function to memoize");(!Number.isFinite(t)||t<0)&&(t=0);let n=we(),o=[],c=f=>{let p=o.indexOf(f);p!==-1&&o.splice(p,1),t>0&&o.push(f)},d=()=>{if(t!==0)for(;o.length>t;){let f=o.shift();f&&(f.hasValue=!1,f.value=void 0)}},m=(f,p)=>{if(mn(p)){let g=f.weakMap.get(p);return g||(g=we(),f.weakMap.set(p,g)),g}return f.map.has(p)||f.map.set(p,we()),f.map.get(p)};return(...f)=>{if(t===0)return e(...f);let p=n;for(let g=0;g<f.length;g+=1)p=m(p,f[g]);if(p.hasValue)return c(p),p.value;let C=e(...f);return p.value=C,p.hasValue=!0,c(p),d(),C}},hn=(e,t)=>{let n;return(...o)=>{clearTimeout(n),n=setTimeout(()=>e(...o),t)}},yn=(e,t=500)=>typeof window!="undefined"&&typeof window.requestIdleCallback=="function"?{type:"idle",handle:window.requestIdleCallback(e,{timeout:t})}:{type:"timeout",handle:setTimeout(e,0)},wn=e=>{e&&(e.type==="idle"&&typeof window!="undefined"&&typeof window.cancelIdleCallback=="function"?window.cancelIdleCallback(e.handle):e.type==="timeout"&&clearTimeout(e.handle))},F=e=>{if(!e)return"";try{return String(e).normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}catch(t){return String(e).toLowerCase()}},ht="General",yt="Producto",bn=(e,t=0)=>{let n=e&&typeof e=="object",o=n&&typeof e.name=="string"?e.name.trim():"",c=n&&typeof e.category=="string"?e.category.trim():"",d=o.length>0?o:`${yt}-${t+1}`,m=c.length>0?c:ht,f=`${d}-${m}`.toLowerCase(),p=0;for(let E=0;E<f.length;E+=1){let S=f.charCodeAt(E);p=(p<<5)-p+S,p&=p}let g=o.length===0||c.length===0?`-${t}`:"";return`pid-${Math.abs(p)}${g}`},be=e=>{let t=document.createElement("div");return t.textContent=e,t.innerHTML},vn="product-data",Cn=()=>{try{return typeof localStorage=="undefined"?null:localStorage.getItem("productDataVersion")}catch(e){return console.warn("Unable to read stored product data version:",e),null}},dt=e=>{if(e)try{if(typeof localStorage=="undefined")return;localStorage.setItem("productDataVersion",e)}catch(t){console.warn("Unable to persist product data version:",t)}},wt=()=>{if(typeof document=="undefined")return null;try{let e=document.getElementById(vn);if(!e||!e.textContent)return null;let t=e.textContent.trim();if(!t)return null;let n=JSON.parse(t);return n?Array.isArray(n.initialProducts)?n:Array.isArray(n.products)?{...n,initialProducts:n.products}:null:null}catch(e){return D("warn","inline_product_parse_failure",{error:e.message}),null}},En=(e,t)=>{if(!e||typeof e!="object")return null;let n=typeof e.id=="string"&&e.id.trim().length>0?e.id.trim():bn(e,t),o=typeof e.originalIndex=="number"?e.originalIndex:typeof e.order=="number"?e.order:t,c=typeof e.name=="string"&&e.name.trim().length>0?e.name:`${yt} ${t+1}`,d=typeof e.description=="string"?e.description:"",m=typeof e.category=="string"&&e.category.trim().length>0?e.category:ht;return{...e,id:n,name:be(c),description:be(d),category:be(m),categoryKey:e.categoryKey||F(m),originalIndex:o}},Ee=(e=[])=>e.map((t,n)=>En(t,n)).filter(Boolean);function Sn(){let e=Se();if(e)return e;let t=wt();if(!t||!Array.isArray(t.initialProducts))return null;let n=Ee(t.initialProducts);return ve(n,{version:t.version||null,source:"inline",isPartial:!0,total:typeof t.totalProducts=="number"?t.totalProducts:n.length})}Sn();var Z=class extends Error{constructor(t,{cause:n,correlationId:o}){super(t),this.name="ProductDataError",this.correlationId=o,n&&(this.cause=n)}},In=async(e,t,n,o,c)=>{let d=new URL(e,window.location.origin);if(d.origin!==window.location.origin||d.protocol!=="https:")throw new Error("Invalid request URL: only same-origin HTTPS requests are allowed");let m=d.toString(),f=0,p;for(;f<=n;)try{let C=Date.now(),g=await fetch(m,t),E=Date.now()-C;if(D("info","fetch_products_attempt",{correlationId:c,attempt:f+1,durationMs:E}),!g.ok)throw new Error(`HTTP error. Status: ${g.status}`);return g}catch(C){if(p=C,f++,f>n)break;D("warn","fetch_products_retry",{correlationId:c,attempt:f,error:C.message,runbook:"RUNBOOK.md#product-data"}),await new Promise(g=>setTimeout(g,o*f))}throw new Z(`Failed to fetch products: ${p.message}`,{cause:p,correlationId:c})},_n=async()=>{let e=Fe(),t=wt(),n=(t==null?void 0:t.initialProducts)||null,o=(t==null?void 0:t.version)||null,c=typeof(t==null?void 0:t.totalProducts)=="number"?t.totalProducts:null,d=Array.isArray(n)?Ee(n):null,m=Array.isArray(d),f=Cn();m&&(o&&dt(o),ve(d,{version:o||null,source:"inline",isPartial:!0,total:c!=null?c:d.length}),D("info","fetch_products_inline_bootstrap",{correlationId:e,count:d.length}));let p=f||o||null,C=p?`/data/product_data.json?v=${encodeURIComponent(p)}`:"/data/product_data.json";try{let E=await(await In(C,{cache:"no-store",headers:{Accept:"application/json"}},2,300,e)).json(),S=Ee(E.products||[]);return nn(S,{version:E.version||null,source:"network",isPartial:!1,total:S.length}),E.version&&dt(E.version),D("info","fetch_products_success",{correlationId:e,count:S.length,source:"network"}),S}catch(g){if(m)return ve(d,{version:o||null,source:"inline-fallback",isPartial:!0,total:c!=null?c:d.length}),D("warn","fetch_products_network_fallback_inline",{correlationId:e,error:g.message,runbook:"RUNBOOK.md#product-data"}),d;throw D("error","fetch_products_failure",{correlationId:e,error:g.message,runbook:"RUNBOOK.md#product-data"}),T(`Error al cargar los productos. Por favor, verifique su conexi\xF3n a internet e int\xE9ntelo de nuevo. (Error: ${g.message})`),g instanceof Z?g:new Z(g.message,{cause:g,correlationId:e})}},y=(e,t={},n=[])=>{let o=document.createElement(e);return Object.entries(t).forEach(([c,d])=>{c==="text"?o.textContent=d:o.setAttribute(c,d)}),n.forEach(c=>{typeof c=="string"?o.appendChild(document.createTextNode(c)):o.appendChild(c)}),o},T=e=>{let t=y("div",{class:"error-message",role:"alert"},[y("p",{},[e]),y("button",{class:"retry-button"},["Intentar nuevamente"])]),n=document.getElementById("product-container");n?(n.innerHTML="",n.appendChild(t),t.querySelector(".retry-button").addEventListener("click",bt)):console.error("Contenedor de productos no encontrado")},ut=[],ft;try{ut=JSON.parse((ft=globalThis.localStorage)==null?void 0:ft.getItem("cart"))||[]}catch(e){ut=[]}var Ln=(e=typeof window!="undefined"?window.performance:void 0)=>{let t="unavailable",n="unavailable",o="unavailable";try{if(!e||typeof e.getEntriesByType!="function")return;let c=e.getEntriesByType("paint")||[],d=e.getEntriesByType("navigation")||[],m=c.find(p=>(p==null?void 0:p.name)==="first-contentful-paint")||c[0];m&&typeof m.startTime=="number"&&(t=m.startTime);let f=d[0];f&&typeof f.domContentLoadedEventEnd=="number"?n=f.domContentLoadedEventEnd:e.timing&&typeof e.timing.domContentLoadedEventEnd=="number"&&(n=e.timing.domContentLoadedEventEnd),f&&typeof f.loadEventEnd=="number"?o=f.loadEventEnd:e.timing&&typeof e.timing.loadEventEnd=="number"&&(o=e.timing.loadEventEnd)}catch(c){console.warn("Performance metrics unavailable:",c)}finally{console.log("First Contentful Paint:",t),console.log("DOM Content Loaded:",n),console.log("Load Time:",o)}};typeof window!="undefined"&&(window.__APP_READY__=!1,window.addEventListener("error",e=>{let t=e.target||e.srcElement,n=!!(t&&(t.tagName==="IMG"||t.tagName==="SCRIPT"||t.tagName==="LINK")),o=!!e.error;if(n||!o){console.warn("Ignored non-fatal error:",{tag:t&&t.tagName,src:t&&(t.src||t.href||t.currentSrc)});return}if(!window.__APP_READY__){console.error("Runtime error before app ready:",e.error);return}console.error("Unhandled JS error:",e.error),T("Ocurri\xF3 un error inesperado. Por favor, recarga la p\xE1gina.")}),window.addEventListener("securitypolicyviolation",e=>{console.warn("CSP violation (logged only):",{blockedURI:e.blockedURI,violatedDirective:e.violatedDirective,sourceFile:e.sourceFile})}));var bt=async()=>{var qe,Me,De;console.log("Initializing app...");let e=document.getElementById("product-container"),t=document.getElementById("sort-options"),n=document.getElementById("filter-keyword"),o=document.getElementById("cart-count"),c=document.getElementById("cart-items"),d=document.getElementById("cart-total"),f=Object.entries({"#product-container":e,"#sort-options":t,"#filter-keyword":n,"#cart-count":o,"#cart-items":c,"#cart-total":d}).filter(([,r])=>!r).map(([r])=>r);if(f.length){D("warn","init_app_missing_dom",{missingSelectors:f,location:typeof window!="undefined"?(qe=window.location)==null?void 0:qe.pathname:"unknown"});return}let p=()=>{let r=document.getElementById("filter-discount");if(r)return r;let i=document.querySelector('section[aria-label*="filtrado"], section[aria-label*="Opciones de filtrado"]'),l=i?i.querySelector(".row"):null;if(!l)return null;let s=y("div",{class:"col-12 mt-2"}),a=y("div",{class:"form-check form-switch"}),u=y("input",{class:"form-check-input",type:"checkbox",id:"filter-discount","aria-label":"Mostrar solo productos con descuento"}),h=y("label",{class:"form-check-label",for:"filter-discount"},["Solo productos con descuento"]);return a.appendChild(u),a.appendChild(h),s.appendChild(a),l.appendChild(s),u},C=12,g=12,E=[],S=[],x=0,j=C,z=null,X=null,ee=null,te=!1,P=JSON.parse(localStorage.getItem("cart"))||[],ie=()=>{let r=document.getElementById("offline-indicator");if(r){let i=navigator.onLine;r.classList.toggle(L.hidden,i),r.classList.toggle(L.block,!i)}navigator.onLine||console.log("App is offline. Using cached data if available.")};function Ct(){let r=document.getElementById("current-year");r&&(r.textContent=new Date().getFullYear())}let ne="CLP",_e=!1,Et=r=>{if(typeof r!="string")return ne;let i=r.trim().toUpperCase();return/^[A-Z]{3}$/.test(i)?i:ne},St=r=>{let i=Et(r);try{return new Intl.NumberFormat("es-CL",{style:"currency",currency:i,minimumFractionDigits:0})}catch(l){return _e||(console.warn("Falling back to CLP currency formatter",{error:l,currencyCode:r}),_e=!0),new Intl.NumberFormat("es-CL",{style:"currency",currency:ne,minimumFractionDigits:0})}},It=(r,i,l=ne)=>{let s=Number(r)||0,a=Number(i)||0,u=St(l),h=u.format(s);if(a){let b=Math.max(s-a,0),_=u.format(b);return y("div",{class:"precio-container"},[y("span",{class:"precio-descuento","aria-label":"Precio con descuento"},[_]),y("span",{class:"precio-original","aria-label":"Precio original"},[y("span",{class:"tachado"},[h])])])}return y("div",{class:"precio-container"},[y("span",{class:"precio","aria-label":"Precio"},[h])])},_t=r=>{let i=y("div",{class:`quantity-control ${L.hidden}`}),l=y("button",{class:"quantity-btn","data-action":"decrease","aria-label":"Decrease quantity"},["-"]),s=y("button",{class:"quantity-btn","data-action":"increase","aria-label":"Increase quantity"},["+"]),a=y("input",{type:"number",class:"quantity-input",value:Math.max(H(r.id),1),min:"1",max:"50","aria-label":"Quantity","data-id":r.id});return i.appendChild(l),i.appendChild(a),i.appendChild(s),i};function Le(r,i){var k;if(!r)return;let l=r.querySelector(".add-to-cart-btn"),s=r.querySelector(".quantity-control"),a=s==null?void 0:s.querySelector(".quantity-input"),u=(s==null?void 0:s.querySelector('.quantity-btn[data-action="decrease"]'))||(s==null?void 0:s.querySelector(".quantity-btn")),h=(s==null?void 0:s.querySelector('.quantity-btn[data-action="increase"]'))||((k=s==null?void 0:s.querySelectorAll(".quantity-btn"))==null?void 0:k[1]),b=(w,v,I)=>{w&&w.dataset.listenerAttached!=="true"&&(w.addEventListener(v,I),w.dataset.listenerAttached="true")};b(l,"click",()=>{Te(i,1),K(l,s,!0)}),b(u,"click",()=>V(i,-1)),b(h,"click",()=>V(i,1)),b(a,"change",w=>{let v=parseInt(w.target.value,10);if(!Number.isFinite(v)){w.target.value=Math.max(H(i.id),1);return}let I=H(i.id);V(i,v-I)});let _=H(i.id);a&&(a.value=_>0?_:1),K(l,s,_>0)}let H=r=>{let i=P.find(l=>l.id===r);return i?i.quantity:0},Lt=(r,{reset:i=!1}={})=>{if(!e)return 0;i&&(e.innerHTML="");let l=document.createDocumentFragment();return r.forEach(s=>{let{id:a,name:u,description:h,image_path:b,price:_,discount:k,stock:w}=s,v=["producto","col-12","col-sm-6","col-md-4","col-lg-3","mb-4",w?"":"agotado",L.contentVisible,L.containIntrinsic].filter(Boolean).join(" "),I=y("div",{class:v,"aria-label":`Product: ${u}`,"data-product-id":a}),q=y("div",{class:"card"});if(k&&Number(k)>0){let A=Math.round(Number(k)/Number(_)*100),Be=y("span",{class:"discount-badge badge bg-danger","aria-label":"Producto en oferta"},[`-${isFinite(A)?A:0}%`]);q.appendChild(Be)}let B=`/${b.replace(/^\//,"")}`,$=y("img",{src:Q(B,{...J,width:360}),srcset:[`${Q(B,{...J,width:200})} 200w`,`${Q(B,{...J,width:320})} 320w`,`${Q(B,{...J,width:480})} 480w`].join(", "),sizes:"(min-width: 1200px) 25vw, (min-width: 992px) 33vw, (min-width: 576px) 50vw, 100vw",alt:u,class:"card-img-top product-thumb",loading:"lazy",fetchpriority:"auto",decoding:"async",width:"400",height:"400"});q.appendChild($);let U=y("div",{class:"card-body"});U.appendChild(y("h3",{class:"card-title"},[u])),U.appendChild(y("p",{class:"card-text"},[h])),U.appendChild(It(_,k));let N=y("div",{class:"action-area","data-pid":a}),ue=y("button",{class:"btn btn-primary add-to-cart-btn mt-2","data-id":a,"aria-label":`Add ${u} to cart`},["Agregar al carrito"]),M=_t(s);N.appendChild(ue),N.appendChild(M),U.appendChild(N),Le(N,s),q.appendChild(U),I.appendChild(q),l.appendChild(I)}),e.appendChild(l),At(),r.length},Pt=r=>{if(!e)return 0;let i=e.querySelectorAll("[data-product-id]");if(!i.length)return 0;let l=new Map(r.map(a=>[a.id,a])),s=0;return i.forEach(a=>{let u=a.getAttribute("data-product-id");if(!u||!l.has(u))return;let h=l.get(u);a.classList.add(L.contentVisible,L.containIntrinsic);let b=a.querySelector(".action-area");Le(b,h),s+=1}),s},Pe=()=>{e&&(e.innerHTML=""),x=0},se=()=>{var s,a,u;let r=(t==null?void 0:t.value)||"original",i=((a=(s=n==null?void 0:n.value)==null?void 0:s.trim)==null?void 0:a.call(s))||"",l=((u=document.getElementById("filter-discount"))==null?void 0:u.checked)||!1;S=Dt(E,i,r,l)},ke=r=>{if(!Array.isArray(S)||S.length===0)return O(),!1;let i=x;if(i>=S.length)return O(),!1;let l=S.slice(i,i+r);return l.length?(Lt(l),x+=l.length,O(),!0):(O(),!1)},ce=()=>ke(j||C),Ae=()=>ke(g),O=()=>{let r=x<S.length;z&&(z.classList.toggle("d-none",!r),z.disabled=!r),ee&&X&&(ee.disconnect(),r&&ee.observe(X))},kt=()=>{z=document.getElementById("catalog-load-more"),X=document.getElementById("catalog-sentinel"),z&&z.addEventListener("click",()=>{Ae()}),X&&typeof window!="undefined"&&"IntersectionObserver"in window&&(ee=new IntersectionObserver(r=>{r.forEach(i=>{i.isIntersecting&&Ae()})},{rootMargin:"200px"})),O()},At=()=>{if(typeof window!="undefined"&&"IntersectionObserver"in window){let r=new IntersectionObserver((i,l)=>{i.forEach(s=>{if(s.isIntersecting){let a=s.target;a.src=a.dataset.src,a.dataset.srcset&&(a.srcset=a.dataset.srcset),a.dataset.sizes&&(a.sizes=a.dataset.sizes),a.classList.remove("lazyload"),l.unobserve(a)}})},{rootMargin:"100px"});document.querySelectorAll("img.lazyload").forEach(i=>r.observe(i))}else document.querySelectorAll("img.lazyload").forEach(r=>{r.dataset.src&&(r.src=r.dataset.src),r.dataset.srcset&&(r.srcset=r.dataset.srcset),r.dataset.sizes&&(r.sizes=r.dataset.sizes),r.classList.remove("lazyload")})};function xt(r,i){if(!r||!i||r.length<3)return!1;let l=u=>u.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),s=l(r),a=l(i);return a.includes(s)?!0:s.length>=4?Tt(s,a):!1}function Tt(r,i){return i.split(/\s+/).some(s=>{if(Math.abs(s.length-r.length)>1)return!1;let a=0,u=Math.max(s.length,r.length);if(Math.min(s.length,r.length)<4)return!1;if(s.length===r.length){for(let b=0;b<s.length;b++)if(s[b]!==r[b]&&a++,a>1)return!1;return a===1}else return Ot(r,s)})}function Ot(r,i){let l=r.length>i.length?r:i,s=r.length>i.length?i:r;if(l.length-s.length!==1)return!1;let a=0,u=0,h=0;for(;u<s.length&&h<l.length;)if(s[u]===l[h])u++,h++;else{if(a++,a>1)return!1;h++}return!0}let qt=(r,i,l,s=!1)=>{let a=i.trim();return r.filter(u=>!u.stock||s&&!(u.discount&&Number(u.discount)>0)?!1:!a||u.name.toLowerCase().includes(a.toLowerCase())||u.description.toLowerCase().includes(a.toLowerCase())?!0:a.length>=4?xt(a,u.name):!1).sort((u,h)=>Mt(u,h,l))},Mt=(r,i,l)=>{if(!l||l==="original")return r.originalIndex-i.originalIndex;let[s,a]=l.split("-"),u=s==="price"?r.price-(r.discount||0):r.name.toLowerCase(),h=s==="price"?i.price-(i.discount||0):i.name.toLowerCase();return a==="asc"?u<h?-1:u>h?1:0:h<u?-1:h>u?1:0},Dt=gn(qt),xe=()=>{try{if(se(),Pe(),!S.length){O();return}ce()}catch(r){console.error("Error al actualizar visualizaci\xF3n de productos:",r),T("Error al actualizar la visualizaci\xF3n de productos. Por favor, intenta m\xE1s tarde.")}},le=null,de=hn(()=>{wn(le),le=yn(()=>{xe(),le=null},400)},150),W=()=>{let r=document.getElementById("cart-count"),i=P.reduce((l,s)=>l+s.quantity,0);r.textContent=i,r.setAttribute("aria-label",`${i} items in cart`)},Te=(r,i)=>{try{let l=P.find(a=>a.id===r.id);l?l.quantity=Math.min(l.quantity+i,50):P.push({id:r.id,name:r.name,description:r.description,price:r.price,discount:r.discount,image_path:r.image_path,quantity:Math.min(i,50),category:r.category,stock:r.stock}),re(),W(),G();let s=document.querySelector(`[data-id="${r.id}"].quantity-input`);s&&(s.value=Math.max(H(r.id),1))}catch(l){console.error("Error al agregar al carrito:",l),T("Error al agregar el art\xEDculo al carrito. Por favor, intenta nuevamente.")}},Oe=r=>{try{P=P.filter(l=>l.id!==r),re(),W(),G();let i=document.querySelector(`.action-area[data-pid="${r}"]`);if(i){let l=i.querySelector(".add-to-cart-btn"),s=i.querySelector(".quantity-control");K(l,s,!1)}}catch(i){console.error("Error al eliminar del carrito:",i),T("Error al eliminar el art\xEDculo del carrito. Por favor, intenta nuevamente.")}},V=(r,i)=>{try{let l=P.find(b=>b.id===r.id),s=l?l.quantity+i:1,a=document.querySelector(`.action-area[data-pid="${r.id}"]`),u=a==null?void 0:a.querySelector(".add-to-cart-btn"),h=a==null?void 0:a.querySelector(".quantity-control");if(s<=0)Oe(r.id),K(u,h,!1);else if(s<=50){l?l.quantity=s:(Te(r,1),K(u,h,!0)),re(),W(),G();let b=document.querySelector(`[data-id="${r.id}"].quantity-input`);b&&(b.value=s,b.classList.add("quantity-changed"),setTimeout(()=>b.classList.remove("quantity-changed"),300))}}catch(l){console.error("Error al actualizar cantidad:",l),T("Error al actualizar la cantidad. Por favor, intenta nuevamente.")}},Bt=()=>{try{P=[],re(),W(),G(),xe()}catch(r){console.error("Error al vaciar el carrito:",r),T("Error al vaciar el carrito. Por favor, int\xE9ntelo de nuevo.")}},K=(r,i,l)=>{if(!r||!i)return;let s=!l;r.classList.toggle(L.hidden,!s),r.classList.toggle(L.flex,s),i.classList.toggle(L.hidden,!l),i.classList.toggle(L.flex,l)},re=()=>{try{localStorage.setItem("cart",JSON.stringify(P))}catch(r){console.error("Error al guardar el carrito:",r),T("Error al guardar el carrito. Tus cambios podr\xEDan no persistir.")}},G=()=>{let r=document.getElementById("cart-items"),i=document.getElementById("cart-total");r.innerHTML="";let l=0;P.forEach(a=>{let u=a.price-(a.discount||0),h=y("div",{class:"cart-item mb-3 d-flex align-items-start","aria-label":`Cart item: ${a.name}`}),b=y("div",{class:"cart-item-content flex-grow-1"});b.appendChild(y("div",{class:"fw-bold mb-1"},[a.name]));let _=y("div",{class:"mb-2"}),k=y("button",{class:"btn btn-sm btn-secondary decrease-quantity","data-id":a.id,"aria-label":`Disminuir cantidad de ${a.name}`},["-"]),w=y("button",{class:"btn btn-sm btn-secondary increase-quantity","data-id":a.id,"aria-label":`Aumentar cantidad de ${a.name}`},["+"]),v=y("span",{class:"mx-2 item-quantity","aria-label":`Cantidad de ${a.name}`},[a.quantity.toString()]);_.appendChild(k),_.appendChild(v),_.appendChild(w),b.appendChild(_),b.appendChild(y("div",{class:"text-muted small"},[`Precio: $${u.toLocaleString("es-CL")}`])),b.appendChild(y("div",{class:"fw-bold"},[`Subtotal: $${(u*a.quantity).toLocaleString("es-CL")}`]));let I=y("button",{class:"btn btn-sm btn-danger remove-item mt-2","data-id":a.id,"aria-label":`Eliminar ${a.name} del carrito`},["Eliminar"]);b.appendChild(I);let q=window.location.pathname.includes("/pages/"),B;q?B=`../${a.image_path.replace(/^\//,"")}`:B=a.image_path;let $=y("div",{class:"cart-item-thumb ms-3 flex-shrink-0"}),N={src:a.thumbnail_path||B,alt:a.name,class:"cart-item-thumb-img",loading:"lazy",decoding:"async",width:"100",height:"100"};if(Array.isArray(a.thumbnail_variants)){let M=a.thumbnail_variants.filter(A=>A&&A.url&&A.width).map(A=>`${A.url} ${A.width}w`);M.length&&(N.srcset=M.join(", "),N.sizes="100px")}let ue=y("img",N);if($.appendChild(ue),h.appendChild(b),h.appendChild($),r.appendChild(h),window.__DEBUG_CART__)try{let M=window.getComputedStyle(h),A=window.getComputedStyle($),Be=window.getComputedStyle(b),Ne=$.getBoundingClientRect(),$e=b.getBoundingClientRect();console.debug("[cart] item",{name:a.name,order:{firstIsContent:h.firstChild===b,lastIsThumb:h.lastChild===$},container:{display:M.display,flexDirection:M.flexDirection,flexWrap:M.flexWrap},thumb:{width:A.width,height:A.height,rect:{w:Ne.width,h:Ne.height}},content:{rect:{w:$e.width,h:$e.height}}})}catch(M){}l+=u*a.quantity}),i.textContent=`Total: $${l.toLocaleString("es-CL")}`,i.setAttribute("aria-label",`Total: $${l.toLocaleString("es-CL")}`);let s=document.getElementById("payment-credit-container");if(s)if(l>=3e4)s.classList.remove("d-none");else{s.classList.add("d-none");let a=s.querySelector("input");a&&(a.checked=!1)}},Nt=()=>{let r=document.querySelector('input[name="paymentMethod"]:checked');if(!r){alert("Por favor seleccione un m\xE9todo de pago");return}let i=`Mi pedido:

`;P.forEach(a=>{let u=a.price-(a.discount||0);i+=`${a.name}
`,i+=`Cantidad: ${a.quantity}
`,i+=`Precio unitario: $${u.toLocaleString("es-CL")}
`,i+=`Subtotal: $${(u*a.quantity).toLocaleString("es-CL")}

`});let l=P.reduce((a,u)=>a+(u.price-(u.discount||0))*u.quantity,0);i+=`Total: $${l.toLocaleString("es-CL")}
`,i+=`M\xE9todo de pago: ${r.value}`;let s=encodeURIComponent(i);window.open(`https://wa.me/56951118901?text=${s}`,"_blank")};try{Ct();let r=Se();(Me=r==null?void 0:r.products)!=null&&Me.length&&(E=r.products.map((w,v)=>({...w,originalIndex:typeof w.originalIndex=="number"?w.originalIndex:v,categoryKey:w.categoryKey||F(w.category)})));let i=document.querySelector("main"),l=((De=i==null?void 0:i.dataset)==null?void 0:De.category)||"";if(l){let w=F(l);E=E.filter(v=>(v.categoryKey||F(v.category))===w).map((v,I)=>({...v,originalIndex:typeof v.originalIndex=="number"?v.originalIndex:I}))}let s=Pt(E);s>0?(x=s,j=s):x=0,kt(),se(),O(),x===0&&S.length&&ce();let a=_n();t.addEventListener("change",()=>{te=!0,de()}),n.addEventListener("input",()=>{te=!0,de()});let u=p();u&&u.addEventListener("change",()=>{te=!0,de()});let h=await a;if(!Array.isArray(h)||h.length===0){if(!E.length){T("No hay productos disponibles. Por favor, intenta m\xE1s tarde.");return}}else if(E=h.map((w,v)=>({...w,originalIndex:typeof w.originalIndex=="number"?w.originalIndex:v,categoryKey:w.categoryKey||F(w.category)})),l){let w=F(l);E=E.filter(v=>(v.categoryKey||F(v.category))===w).map((v,I)=>({...v,originalIndex:typeof v.originalIndex=="number"?v.originalIndex:I}))}se(),te||x===0?(Pe(),S.length?ce():O()):O(),typeof window!="undefined"&&(window.__APP_READY__=!0),window.addEventListener("online",ie),window.addEventListener("offline",ie),ie();let b=document.getElementById("cart-icon"),_=document.getElementById("empty-cart"),k=document.getElementById("submit-cart");b&&b.addEventListener("click",async()=>{G();let w=document.getElementById("cartOffcanvas");try{await it("#cartOffcanvas"),w&&(w.dataset.bsFallback="0")}catch(v){console.error("Bootstrap Offcanvas no est\xE1 disponible",v),w&&(w.dataset.bsFallback="1",w.classList.add("show"),w.removeAttribute("aria-hidden"))}}),_&&_.addEventListener("click",Bt),k&&k.addEventListener("click",Nt),c&&c.addEventListener("click",w=>{var q;let v=w.target,I=(q=v.closest("[data-id]"))==null?void 0:q.dataset.id;I&&(v.classList.contains("decrease-quantity")?V({id:I},-1):v.classList.contains("increase-quantity")?V({id:I},1):v.classList.contains("remove-item")&&Oe(I))}),W(),"performance"in window&&window.addEventListener("load",()=>{Ln()})}catch(r){console.error("Error al inicializar productos:",r),T("Error al cargar productos. Por favor, int\xE9ntelo m\xE1s tarde.")}};typeof document!="undefined"&&document.addEventListener("DOMContentLoaded",function(){gt(),bt().catch(e=>{console.error("Error al inicializar la aplicaci\xF3n:",e),T("Error al inicializar la aplicaci\xF3n. Por favor, actualice la p\xE1gina.")})});function vt(){let e=document.documentElement;try{document.querySelectorAll('link[rel="stylesheet"][media="print"][data-defer]').forEach(t=>{t.media="all",t.removeAttribute("data-defer")})}catch(t){}e.dataset.enhancementsInit!=="1"&&(e.dataset.enhancementsInit="1",je(),Ye(),ze(),Ue(),Re(),Ke(),Ve(),Ge(),at())}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",vt):vt();try{typeof window!="undefined"&&window.__ANALYTICS_ENABLE__===!0&&import("./chunks/analytics-O2RU3SL6.js").then(e=>{e.initAnalytics({enabled:!0,consentRequired:!0,sampleRate:1}),window.__analyticsTrack=(t,n)=>{try{return e.track(t,n)}catch(o){return!1}},e.track("page_view",{path:location.pathname})}).catch(()=>{})}catch(e){}export{vt as __initEnhancementsOnceForTest};
