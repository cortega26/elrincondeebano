(()=>{var Ae=Object.create;var Z=Object.defineProperty;var Oe=Object.getOwnPropertyDescriptor;var xe=Object.getOwnPropertyNames;var Ne=Object.getPrototypeOf,$e=Object.prototype.hasOwnProperty;var P=(e,n)=>()=>(e&&(n=e(e=0)),n);var X=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var Me=(e,n,i,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let c of xe(n))!$e.call(e,c)&&c!==i&&Z(e,c,{get:()=>n[c],enumerable:!(u=Oe(n,c))||u.enumerable});return e};var Te=(e,n,i)=>(i=e!=null?Ae(Ne(e)):{},Me(n||!e||!e.__esModule?Z(i,"default",{value:e,enumerable:!0}):i,e));function ee(){try{let e=document.createElement("style");window&&window.__CSP_NONCE__&&e.setAttribute("nonce",window.__CSP_NONCE__),e.textContent=`
      /* Miniatura del carrito */
      .cart-item-thumb {
        width: 40px;
        height: 40px;
        object-fit: cover;
        border-radius: 0.25rem;
        margin-right: 0.5rem;
      }

      /* Contornos de enfoque claros para accesibilidad */
      .navbar .nav-link:focus,
      .navbar .dropdown-item:focus {
        outline: 2px solid var(--primary-color);
        outline-offset: 2px;
      }

      /* Espaciado entre botones en el offcanvas del carrito */
      #cartOffcanvas .offcanvas-body > .btn + .btn {
        margin-top: 0.5rem !important;
      }
    `,document.head.appendChild(e)}catch(e){console.warn("[modules/enhancements] injectEnhancementStyles error:",e)}}var te=P(()=>{});function ne(){try{document.addEventListener("keydown",n=>{n.key==="Tab"&&document.body.classList.add("keyboard-navigation")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")});let e=document.createElement("style");window&&window.__CSP_NONCE__&&e.setAttribute("nonce",window.__CSP_NONCE__),e.textContent=".keyboard-navigation *:focus { outline: 2px solid var(--primary-color); outline-offset: 2px; }",document.head.appendChild(e)}catch(e){console.warn("[modules/a11y] setupNavigationAccessibility error:",e)}}var oe=P(()=>{});function ae(){try{"loading"in HTMLImageElement.prototype&&document.querySelectorAll("img:not([loading])").forEach(e=>{e.loading="lazy"})}catch(e){console.warn("[modules/perf] setupPerformanceOptimizations error:",e)}}var re=P(()=>{});async function De(){try{let e=localStorage.getItem("productDataVersion"),n=e?`/_products/product_data.json?v=${encodeURIComponent(e)}`:"/_products/product_data.json",i=await fetch(n,{cache:"no-store",headers:{Accept:"application/json"}});if(!i.ok)return null;let u=await i.json(),c=Array.isArray(u?.products)?u.products:Array.isArray(u)?u:[],p={};return c.forEach(g=>{let y=g.id||String(g.name)+"-"+String(g.category);p[y]=g}),p}catch(e){return console.error("[modules/seo] Error loading product data:",e),null}}async function ie(){try{let e=await De();if(!e)return;let i=Object.values(e).slice(0,20).map(p=>({"@type":"Product",name:p.name,image:p.image_path,description:p.description,brand:p.brand||"Gen\xE9rico",offers:{"@type":"Offer",price:p.price,priceCurrency:"CLP",availability:p.stock?"https://schema.org/InStock":"https://schema.org/OutOfStock"}})),u={"@context":"https://schema.org","@graph":[{"@type":"Store",name:"El Rinc\xF3n de \xC9bano",image:"https://elrincondeebano.com/assets/images/web/logo.webp",description:"Un minimarket en la puerta de tu departamento",address:{"@type":"PostalAddress",addressCountry:"CL"},telephone:"+56951118901",url:"http://www.elrincondeebano.com/"},...i]},c=document.createElement("script");c.type="application/ld+json",window&&window.__CSP_NONCE__&&c.setAttribute("nonce",window.__CSP_NONCE__),c.textContent=JSON.stringify(u),document.head.appendChild(c)}catch(e){console.error("[modules/seo] Error generating structured data:",e)}}function ce(){try{if(!document.querySelector('link[rel="canonical"]')){let e=document.createElement("link");e.rel="canonical",e.href=location.origin+location.pathname,document.head.appendChild(e)}if(!document.querySelector('meta[name="description"]')){let e=document.createElement("meta");e.name="description",e.content="El Rinc\xF3n de \xC9bano - Minimarket con delivery instant\xE1neo.",document.head.appendChild(e)}}catch(e){console.warn("[modules/seo] injectSeoMetadata error:",e)}}var se=P(()=>{});function de(){try{if(!document.querySelector('link[rel="manifest"]')){let e=document.createElement("link");e.rel="manifest",e.href="/app.webmanifest",document.head.appendChild(e)}}catch(e){console.warn("[modules/pwa] injectPwaManifest error:",e)}}var le=P(()=>{});function ue(){try{window?.console?.debug&&console.debug("[modules/checkout] setupCheckoutProgress: no-op")}catch{}}var me=P(()=>{});var he=X((ot,H)=>{"use strict";var R={path:"/service-worker.js",scope:"/",updateCheckInterval:3e5};function fe(){if(!("serviceWorker"in navigator)){console.warn("Service workers are not supported in this browser");return}window.addEventListener("load",async()=>{try{ze()}catch(e){console.error("Service Worker initialization failed:",e),We("Failed to initialize service worker. Some features may not work offline.")}})}async function ze(){try{let e=await navigator.serviceWorker.register(R.path,{scope:R.scope});console.log("ServiceWorker registered successfully:",e.scope),Be(e),je(e),Re(),Ue()}catch(e){throw console.error("ServiceWorker registration failed:",e),e}}function Be(e){e.addEventListener("updatefound",()=>{let n=e.installing;n.addEventListener("statechange",()=>{n.state==="installed"&&navigator.serviceWorker.controller&&n.postMessage({type:"SKIP_WAITING"})})})}function je(e){pe(e),setInterval(()=>{pe(e)},R.updateCheckInterval)}async function pe(e){try{await e.update();let n=await fetch("/_products/product_data.json",{cache:"no-store",headers:{Accept:"application/json"}});if(n.ok){let u=(await n.json()).version,c=localStorage.getItem("productDataVersion");u!==c&&(e.active?.postMessage({type:"INVALIDATE_PRODUCT_CACHE"}),localStorage.setItem("productDataVersion",u),He(null,"New product data available"))}}catch(n){console.warn("Update check failed:",n)}}function Re(){let e=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{e||(e=!0,window.location.reload())})}function Ue(){let e=()=>{let n=document.getElementById("offline-indicator");if(n){let i=navigator.onLine;n.classList.toggle("is-hidden",i)}navigator.onLine||Fe("You are currently offline. Some features may be limited.")};window.addEventListener("online",e),window.addEventListener("offline",e),e()}function He(e,n="Una versi\xF3n est\xE1 disponible"){let i=W(n,"Actualizar ahora","Despu\xE9s",()=>{e?e.postMessage({type:"SKIP_WAITING"}):window.location.reload()});F(i)}function We(e){let n=W(e,"Reload","Dismiss",()=>window.location.reload());F(n)}function Fe(e){let n=W(e,"Retry","Dismiss",()=>window.location.reload());F(n)}function W(e,n,i,u){let c=document.createElement("div");return c.className="notification-toast",c.setAttribute("role","alert"),c.setAttribute("aria-live","polite"),c.innerHTML=`
        <div class="notification-content">
            <p>${e}</p>
            <div class="notification-actions">
                <button class="primary-action">${n}</button>
                <button class="secondary-action">${i}</button>
            </div>
        </div>
    `,c.querySelector(".primary-action").addEventListener("click",()=>{u(),c.remove()}),c.querySelector(".secondary-action").addEventListener("click",()=>{c.remove()}),c}function F(e){let n=document.querySelector(".notification-toast");n&&n.remove(),document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&e.remove()},300*1e3)}typeof navigator<"u"&&"serviceWorker"in navigator&&fe();var Ke=(e,n=100)=>{let i=new Map;return(...u)=>{let c=JSON.stringify(u);if(i.has(c))return i.get(c);let p=e(...u);if(i.size>=n){let g=i.keys().next().value;i.delete(g)}return i.set(c,p),p}},Qe=(e,n)=>{let i;return(...u)=>{clearTimeout(i),i=setTimeout(()=>e(...u),n)}},U=e=>{if(!e)return"";try{return String(e).normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}catch{return String(e).toLowerCase()}},ye=e=>{let n=`${e.name}-${e.category}`.toLowerCase(),i=0;for(let u=0;u<n.length;u++){let c=n.charCodeAt(u);i=(i<<5)-i+c,i=i&i}return`pid-${Math.abs(i)}`},j=e=>{let n=document.createElement("div");return n.textContent=e,n.innerHTML},Ve=async()=>{try{let e=localStorage.getItem("productDataVersion"),n=e?`/_products/product_data.json?v=${encodeURIComponent(e)}`:"/_products/product_data.json",i=await fetch(n,{cache:"no-store",headers:{Accept:"application/json"}});if(!i.ok)throw new Error(`HTTP error. Status: ${i.status}`);return(await i.json()).products.map(c=>({...c,id:ye(c),name:j(c.name),description:j(c.description),category:j(c.category),categoryKey:U(c.category)}))}catch(e){throw console.error("Error al obtener productos:",e),h(`Error al cargar los productos. Por favor, verifique su conexi\xF3n a internet e int\xE9ntelo de nuevo. (Error: ${e.message})`),e}},l=(e,n={},i=[])=>{let u=document.createElement(e);return Object.entries(n).forEach(([c,p])=>{c==="text"?u.textContent=p:u.setAttribute(c,p)}),i.forEach(c=>{typeof c=="string"?u.appendChild(document.createTextNode(c)):u.appendChild(c)}),u},h=e=>{let n=l("div",{class:"error-message",role:"alert"},[l("p",{},[e]),l("button",{class:"retry-button"},["Intentar nuevamente"])]),i=document.getElementById("product-container");i?(i.innerHTML="",i.appendChild(n),n.querySelector(".retry-button").addEventListener("click",ge)):console.error("Contenedor de productos no encontrado")};typeof window<"u"&&(window.__APP_READY__=!1,window.addEventListener("error",e=>{let n=e.target||e.srcElement,i=!!(n&&(n.tagName==="IMG"||n.tagName==="SCRIPT"||n.tagName==="LINK")),u=!!e.error;if(i||!u){console.warn("Ignored non-fatal error:",{tag:n&&n.tagName,src:n&&(n.src||n.href||n.currentSrc)});return}if(!window.__APP_READY__){console.error("Runtime error before app ready:",e.error);return}console.error("Unhandled JS error:",e.error),h("Ocurri\xF3 un error inesperado. Por favor, recarga la p\xE1gina.")}),window.addEventListener("securitypolicyviolation",e=>{console.warn("CSP violation (logged only):",{blockedURI:e.blockedURI,violatedDirective:e.violatedDirective,sourceFile:e.sourceFile})}));var ge=async()=>{if(console.log("Initializing app..."),typeof DOMPurify>"u")try{await new Promise((t,a)=>{let r=document.createElement("script");r.src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.8/purify.min.js",r.onload=t,r.onerror=a,document.head.appendChild(r)})}catch{console.warn("DOMPurify CDN blocked; using noop sanitizer"),window.DOMPurify={sanitize:a=>a}}let e=document.getElementById("navbar-container"),n=document.getElementById("footer-container"),i=document.getElementById("product-container"),u=document.getElementById("sort-options"),c=document.getElementById("filter-keyword"),p=()=>{let t=document.getElementById("filter-discount");if(t)return t;let a=document.querySelector('section[aria-label*="filtrado"], section[aria-label*="Opciones de filtrado"]'),r=a?a.querySelector(".row"):null;if(!r)return null;let s=l("div",{class:"col-12 mt-2"}),o=l("div",{class:"form-check form-switch"}),d=l("input",{class:"form-check-input",type:"checkbox",id:"filter-discount","aria-label":"Mostrar solo productos con descuento"}),m=l("label",{class:"form-check-label",for:"filter-discount"},["Solo productos con descuento"]);return o.appendChild(d),o.appendChild(m),s.appendChild(o),r.appendChild(s),d},g=[],y=JSON.parse(localStorage.getItem("cart"))||[],N=()=>{let t=document.getElementById("offline-indicator");t&&t.classList.toggle("is-hidden",navigator.onLine),navigator.onLine||console.log("App is offline. Using cached data if available.")},K=async(t,a)=>{if(!t){console.warn(`Contenedor no encontrado para el componente: ${a}`);return}try{let r=await fetch(a);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);let s=await r.text(),o=DOMPurify.sanitize(s,{USE_PROFILES:{html:!0},ALLOWED_TAGS:["div","span","p","h1","h2","h3","h4","h5","h6","ul","ol","li","a","img","br","strong","em","button","nav","footer","header","main","section"],ALLOWED_ATTR:["href","src","alt","class","id","style","aria-label","role","type","data-bs-toggle","data-bs-target","aria-controls","aria-expanded"]});t.innerHTML="";let m=new DOMParser().parseFromString(o,"text/html");Array.from(m.body.children).forEach(f=>{t.appendChild(f.cloneNode(!0))})}catch(r){throw console.error("Error al cargar componente:",{component:a,message:r.message}),r}},we=async()=>{try{await Promise.all([K(e,"/pages/navbar.html"),K(n,"/pages/footer.html")]),console.log("Components loaded successfully")}catch(t){console.error("Error al cargar componentes:",t),h("Error al cargar los componentes de la p\xE1gina. Por favor, actualice la p\xE1gina o verifique su conexi\xF3n a internet.")}},be=(t,a,r="CLP")=>{let s=new Intl.NumberFormat("es-CL",{style:"currency",currency:r,minimumFractionDigits:0}),o=s.format(t);if(a){let d=t-a,m=s.format(d);return l("div",{class:"precio-container"},[l("span",{class:"precio-descuento","aria-label":"Precio con descuento"},[m]),l("span",{class:"precio-original","aria-label":"Precio original"},[l("span",{class:"tachado"},[o])])])}return l("div",{class:"precio-container"},[l("span",{class:"precio","aria-label":"Precio"},[o])])},Ce=t=>{let a=l("div",{class:"quantity-control"}),r=l("button",{class:"quantity-btn","aria-label":"Decrease quantity"},["-"]),s=l("button",{class:"quantity-btn","aria-label":"Increase quantity"},["+"]),o=l("input",{type:"number",class:"quantity-input",value:Math.max($(t.id),1),min:"1",max:"50","aria-label":"Quantity","data-id":t.id});return r.addEventListener("click",()=>_(t,-1)),s.addEventListener("click",()=>_(t,1)),o.addEventListener("change",d=>{let m=parseInt(d.target.value,10),f=$(t.id);_(t,m-f)}),a.appendChild(r),a.appendChild(o),a.appendChild(s),a},$=t=>{let a=y.find(r=>r.id===t);return a?a.quantity:0},Ee=t=>{let a=document.createDocumentFragment(),r=window.location.pathname.includes("/pages/");t.forEach(o=>{let{id:d,name:m,description:f,image_path:v,price:A,discount:L,stock:D}=o,O=l("div",{class:`producto col-12 col-sm-6 col-md-4 col-lg-3 mb-4 ${D?"":"agotado"}`,"aria-label":`Product: ${m}`}),I=l("div",{class:"card"});if(L&&Number(L)>0){let C=Math.round(Number(L)/Number(A)*100),qe=l("span",{class:"discount-badge badge bg-danger","aria-label":"Producto en oferta"},[`-${isFinite(C)?C:0}%`]);I.appendChild(qe)}let w;r?w=`../${v.replace(/^\//,"")}`:w=v;let x=l("img",{"data-src":w,alt:m,class:"card-img-top lazyload",loading:"lazy",decoding:"async",width:"400",height:"400"});I.appendChild(x);let b=l("div",{class:"card-body"});b.appendChild(l("h3",{class:"card-title"},[m])),b.appendChild(l("p",{class:"card-text"},[f])),b.appendChild(be(A,L));let z=l("div",{class:"action-area","data-pid":d}),G=l("button",{class:"btn btn-primary add-to-cart-btn mt-2","data-id":d,"aria-label":`Add ${m} to cart`},["Agregar al carrito"]);G.addEventListener("click",()=>{Q(o,1),E(d,!0)});let B=Ce(o);B.style.display="none",z.appendChild(G),z.appendChild(B),b.appendChild(z);let J=y.find(C=>C.id===d),Y=J?J.quantity:0;if(Y>0){let C=B.querySelector(".quantity-input");C&&(C.value=Y),E(d,!0)}else E(d,!1);I.appendChild(b),O.appendChild(I),a.appendChild(O)});let s=document.getElementById("product-container");s.innerHTML="",s.appendChild(a),Se()},Se=()=>{let t=new IntersectionObserver((a,r)=>{a.forEach(s=>{if(s.isIntersecting){let o=s.target;o.src=o.dataset.src,o.classList.remove("lazyload"),r.unobserve(o)}})},{rootMargin:"100px"});document.querySelectorAll("img.lazyload").forEach(a=>t.observe(a))},Le=(t,a,r,s=!1)=>t.filter(o=>(o.name.toLowerCase().includes(a.toLowerCase())||o.description.toLowerCase().includes(a.toLowerCase()))&&o.stock&&(!s||o.discount&&Number(o.discount)>0)).sort((o,d)=>Ie(o,d,r)),Ie=(t,a,r)=>{if(!r||r==="original")return t.originalIndex-a.originalIndex;let[s,o]=r.split("-"),d=s==="price"?t.price-(t.discount||0):t.name.toLowerCase(),m=s==="price"?a.price-(a.discount||0):a.name.toLowerCase();return o==="asc"?d<m?-1:d>m?1:0:m<d?-1:m>d?1:0},Pe=Ke(Le),M=()=>{try{let t=u.value||"original",a=c.value.trim(),r=document.getElementById("filter-discount")?.checked||!1,s=Pe(g,a,t,r);Ee(s)}catch(t){console.error("Error al actualizar visualizaci\xF3n de productos:",t),h("Error al actualizar la visualizaci\xF3n de productos. Por favor, intenta m\xE1s tarde.")}},T=Qe(M,300),k=()=>{let t=document.getElementById("cart-count"),a=y.reduce((r,s)=>r+s.quantity,0);t.textContent=a,t.setAttribute("aria-label",`${a} items in cart`)},Q=(t,a)=>{try{let r=y.find(o=>o.id===t.id);r?r.quantity=Math.min(r.quantity+a,50):y.push({id:t.id,name:t.name,description:t.description,price:t.price,discount:t.discount,image_path:t.image_path,quantity:Math.min(a,50),category:t.category,stock:t.stock}),q(),k(),S();let s=document.querySelector(`[data-id="${t.id}"].quantity-input`);s&&(s.value=Math.max($(t.id),1))}catch(r){console.error("Error al agregar al carrito:",r),h("Error al agregar el art\xEDculo al carrito. Por favor, intenta nuevamente.")}},V=t=>{try{y=y.filter(a=>a.id!==t),q(),k(),S(),E(t,!1)}catch(a){console.error("Error al eliminar del carrito:",a),h("Error al eliminar el art\xEDculo del carrito. Por favor, intenta nuevamente.")}},_=(t,a)=>{try{let r=y.find(o=>o.id===t.id),s=r?r.quantity+a:1;if(s<=0)V(t.id),E(t.id,!1);else if(s<=50){r?r.quantity=s:(Q(t,1),E(t.id,!0)),q(),k(),S();let o=document.querySelector(`[data-id="${t.id}"].quantity-input`);o&&(o.value=s,o.classList.add("quantity-changed"),setTimeout(()=>o.classList.remove("quantity-changed"),300))}}catch(r){console.error("Error al actualizar cantidad:",r),h("Error al actualizar la cantidad. Por favor, intenta nuevamente.")}},ke=()=>{try{y=[],q(),k(),S(),M()}catch(t){console.error("Error al vaciar el carrito:",t),h("Error al vaciar el carrito. Por favor, int\xE9ntelo de nuevo.")}},E=(t,a)=>{let r=document.querySelector(`.action-area[data-pid="${t}"]`);if(!r)return;let s=r.querySelector(".btn.btn-primary"),o=r.querySelector(".quantity-control");!s||!o||(a?(s.style.display="none",o.style.display="flex"):(o.style.display="none",s.style.display="flex"))},q=()=>{try{localStorage.setItem("cart",JSON.stringify(y))}catch(t){console.error("Error al guardar el carrito:",t),h("Error al guardar el carrito. Tus cambios podr\xEDan no persistir.")}},S=()=>{let t=document.getElementById("cart-items"),a=document.getElementById("cart-total");t.innerHTML="";let r=0;y.forEach(o=>{let d=o.price-(o.discount||0),m=l("div",{class:"cart-item mb-3 d-flex align-items-center","aria-label":`Cart item: ${o.name}`,style:"flex-direction: row; align-items: center;"}),f=l("div",{class:"cart-item-content flex-grow-1"});f.appendChild(l("div",{class:"fw-bold mb-1"},[o.name]));let v=l("div",{class:"mb-2"}),A=l("button",{class:"btn btn-sm btn-secondary decrease-quantity","data-id":o.id,"aria-label":`Disminuir cantidad de ${o.name}`},["-"]),L=l("button",{class:"btn btn-sm btn-secondary increase-quantity","data-id":o.id,"aria-label":`Aumentar cantidad de ${o.name}`},["+"]),D=l("span",{class:"mx-2 item-quantity","aria-label":`Cantidad de ${o.name}`},[o.quantity.toString()]);v.appendChild(A),v.appendChild(D),v.appendChild(L),f.appendChild(v),f.appendChild(l("div",{class:"text-muted small"},[`Precio: $${d.toLocaleString("es-CL")}`])),f.appendChild(l("div",{class:"fw-bold"},[`Subtotal: $${(d*o.quantity).toLocaleString("es-CL")}`]));let O=l("button",{class:"btn btn-sm btn-danger remove-item mt-2","data-id":o.id,"aria-label":`Eliminar ${o.name} del carrito`},["Eliminar"]);f.appendChild(O);let I=window.location.pathname.includes("/pages/"),w;I?w=`../${o.image_path.replace(/^\//,"")}`:w=o.image_path;let x=l("div",{class:"cart-item-thumb"}),b=l("img",{src:w,alt:o.name,class:"cart-item-thumb-img",loading:"lazy",decoding:"async",width:"60",height:"60"});x.appendChild(b),m.appendChild(x),m.appendChild(f),t.appendChild(m),r+=d*o.quantity}),a.textContent=`Total: $${r.toLocaleString("es-CL")}`,a.setAttribute("aria-label",`Total: $${r.toLocaleString("es-CL")}`);let s=document.getElementById("payment-credit-container");if(s)if(r>=3e4)s.classList.remove("d-none");else{s.classList.add("d-none");let o=s.querySelector("input");o&&(o.checked=!1)}},_e=()=>{let t=document.querySelector('input[name="paymentMethod"]:checked');if(!t){alert("Por favor seleccione un m\xE9todo de pago");return}let a=`Mi pedido:

`;y.forEach(o=>{let d=o.price-(o.discount||0);a+=`${o.name}
`,a+=`Cantidad: ${o.quantity}
`,a+=`Precio unitario: $${d.toLocaleString("es-CL")}
`,a+=`Subtotal: $${(d*o.quantity).toLocaleString("es-CL")}

`});let r=y.reduce((o,d)=>o+(d.price-(d.discount||0))*d.quantity,0);a+=`Total: $${r.toLocaleString("es-CL")}
`,a+=`M\xE9todo de pago: ${t.value}`;let s=encodeURIComponent(a);window.open(`https://wa.me/56951118901?text=${s}`,"_blank")};try{if(await we(),g=await Ve(),g.length===0){h("No hay productos disponibles. Por favor, intenta m\xE1s tarde.");return}let t=document.querySelector("main").dataset.category;if(t){let d=U(t);g=g.filter(m=>(m.categoryKey||U(m.category))===d)}u.addEventListener("change",T),c.addEventListener("input",T);let a=p();a&&a.addEventListener("change",T),M(),typeof window<"u"&&(window.__APP_READY__=!0),window.addEventListener("online",N),window.addEventListener("offline",N),N();let r=document.getElementById("cart-icon"),s=document.getElementById("empty-cart"),o=document.getElementById("submit-cart");r.addEventListener("click",()=>{if(typeof window.bootstrap<"u"&&window.bootstrap.Offcanvas){let d=new window.bootstrap.Offcanvas(document.getElementById("cartOffcanvas"));S(),d.show()}else{console.error("Bootstrap Offcanvas no est\xE1 disponible"),S();let d=document.getElementById("cartOffcanvas");d&&d.classList.add("show")}}),s.addEventListener("click",ke),o.addEventListener("click",_e),document.getElementById("cart-items").addEventListener("click",d=>{let m=d.target,f=m.closest("[data-id]")?.dataset.id;f&&(m.classList.contains("decrease-quantity")?_({id:f},-1):m.classList.contains("increase-quantity")?_({id:f},1):m.classList.contains("remove-item")&&V(f))}),k(),"performance"in window&&window.addEventListener("load",()=>{let d=performance.getEntriesByType("paint"),m=performance.getEntriesByType("navigation")[0];console.log("First Contentful Paint:",d[0].startTime),console.log("DOM Content Loaded:",m.domContentLoadedEventEnd),console.log("Load Time:",m.loadEventEnd)})}catch(t){console.error("Error al inicializar productos:",t),h("Error al cargar productos. Por favor, int\xE9ntelo m\xE1s tarde.")}};typeof document<"u"&&document.addEventListener("DOMContentLoaded",function(){fe(),ge().catch(e=>{console.error("Error al inicializar la aplicaci\xF3n:",e),h("Error al inicializar la aplicaci\xF3n. Por favor, actualice la p\xE1gina.")})});typeof H<"u"&&(H.exports={generateStableId:ye})});var Ge=X(()=>{te();oe();re();se();le();me();var lt=Te(he());function ve(){let e=document.documentElement;try{document.querySelectorAll('link[rel="stylesheet"][media="print"][data-defer]').forEach(n=>{n.media="all",n.removeAttribute("data-defer")})}catch{}e.dataset.enhancementsInit!=="1"&&(e.dataset.enhancementsInit="1",ee(),ue(),ne(),ae(),ce(),ie(),de())}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ve):ve()});Ge();})();
