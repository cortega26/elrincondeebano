(()=>{var xe=Object.create;var Z=Object.defineProperty;var Ae=Object.getOwnPropertyDescriptor;var Oe=Object.getOwnPropertyNames;var Ne=Object.getPrototypeOf,Te=Object.prototype.hasOwnProperty;var _=(e,n)=>()=>(e&&(n=e(e=0)),n);var X=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var $e=(e,n,i,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let c of Oe(n))!Te.call(e,c)&&c!==i&&Z(e,c,{get:()=>n[c],enumerable:!(u=Ae(n,c))||u.enumerable});return e};var Me=(e,n,i)=>(i=e!=null?xe(Ne(e)):{},$e(n||!e||!e.__esModule?Z(i,"default",{value:e,enumerable:!0}):i,e));function ee(){try{let e=document.createElement("style");window&&window.__CSP_NONCE__&&e.setAttribute("nonce",window.__CSP_NONCE__),e.textContent=`
      /* Miniatura del carrito (mantener consistente con base/enhanced CSS) */
      .cart-item-thumb { width: 72px; height: 72px; flex-shrink: 0; }
      .cart-item-thumb img, .cart-item-thumb-img { width: 100%; height: 100%; object-fit: cover; border-radius: 0.25rem; }

      /* Contornos de enfoque claros para accesibilidad */
      .navbar .nav-link:focus,
      .navbar .dropdown-item:focus {
        outline: 2px solid var(--primary-color);
        outline-offset: 2px;
      }

      /* Espaciado entre botones en el offcanvas del carrito */
      #cartOffcanvas .offcanvas-body > .btn + .btn { margin-top: 0.5rem !important; }
    `,document.head.appendChild(e)}catch(e){console.warn("[modules/enhancements] injectEnhancementStyles error:",e)}}var te=_(()=>{});function ne(){try{document.addEventListener("keydown",n=>{n.key==="Tab"&&document.body.classList.add("keyboard-navigation")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")});let e=document.createElement("style");window&&window.__CSP_NONCE__&&e.setAttribute("nonce",window.__CSP_NONCE__),e.textContent=".keyboard-navigation *:focus { outline: 2px solid var(--primary-color); outline-offset: 2px; }",document.head.appendChild(e)}catch(e){console.warn("[modules/a11y] setupNavigationAccessibility error:",e)}}var oe=_(()=>{});function ae(){try{"loading"in HTMLImageElement.prototype&&document.querySelectorAll("img:not([loading])").forEach(e=>{e.loading="lazy"})}catch(e){console.warn("[modules/perf] setupPerformanceOptimizations error:",e)}}var re=_(()=>{});async function De(){try{let e=localStorage.getItem("productDataVersion"),n=e?`/_products/product_data.json?v=${encodeURIComponent(e)}`:"/_products/product_data.json",i=await fetch(n,{cache:"no-store",headers:{Accept:"application/json"}});if(!i.ok)return null;let u=await i.json(),c=Array.isArray(u?.products)?u.products:Array.isArray(u)?u:[],f={};return c.forEach(g=>{let y=g.id||String(g.name)+"-"+String(g.category);f[y]=g}),f}catch(e){return console.error("[modules/seo] Error loading product data:",e),null}}async function ie(){try{let e=await De();if(!e)return;let i=Object.values(e).slice(0,20).map(f=>({"@type":"Product",name:f.name,image:f.image_path,description:f.description,brand:f.brand||"Gen\xE9rico",offers:{"@type":"Offer",price:f.price,priceCurrency:"CLP",availability:f.stock?"https://schema.org/InStock":"https://schema.org/OutOfStock"}})),u={"@context":"https://schema.org","@graph":[{"@type":"Store",name:"El Rinc\xF3n de \xC9bano",image:"https://elrincondeebano.com/assets/images/web/logo.webp",description:"Un minimarket en la puerta de tu departamento",address:{"@type":"PostalAddress",addressCountry:"CL"},telephone:"+56951118901",url:"http://www.elrincondeebano.com/"},...i]},c=document.createElement("script");c.type="application/ld+json",window&&window.__CSP_NONCE__&&c.setAttribute("nonce",window.__CSP_NONCE__),c.textContent=JSON.stringify(u),document.head.appendChild(c)}catch(e){console.error("[modules/seo] Error generating structured data:",e)}}function ce(){try{if(!document.querySelector('link[rel="canonical"]')){let e=document.createElement("link");e.rel="canonical",e.href=location.origin+location.pathname,document.head.appendChild(e)}if(!document.querySelector('meta[name="description"]')){let e=document.createElement("meta");e.name="description",e.content="El Rinc\xF3n de \xC9bano - Minimarket con delivery instant\xE1neo.",document.head.appendChild(e)}}catch(e){console.warn("[modules/seo] injectSeoMetadata error:",e)}}var se=_(()=>{});function de(){try{if(!document.querySelector('link[rel="manifest"]')){let e=document.createElement("link");e.rel="manifest",e.href="/app.webmanifest",document.head.appendChild(e)}}catch(e){console.warn("[modules/pwa] injectPwaManifest error:",e)}}var le=_(()=>{});function ue(){try{window?.console?.debug&&console.debug("[modules/checkout] setupCheckoutProgress: no-op")}catch{}}var me=_(()=>{});var he=X((ot,K)=>{"use strict";var H={path:"/service-worker.js",scope:"/",updateCheckInterval:3e5};function fe(){if(!("serviceWorker"in navigator)){console.warn("Service workers are not supported in this browser");return}window.addEventListener("load",async()=>{try{Be()}catch(e){console.error("Service Worker initialization failed:",e),He("Failed to initialize service worker. Some features may not work offline.")}})}async function Be(){try{let e=await navigator.serviceWorker.register(H.path,{scope:H.scope});console.log("ServiceWorker registered successfully:",e.scope),ze(e),je(e),Re(),Ue()}catch(e){throw console.error("ServiceWorker registration failed:",e),e}}function ze(e){e.addEventListener("updatefound",()=>{let n=e.installing;n.addEventListener("statechange",()=>{n.state==="installed"&&navigator.serviceWorker.controller&&n.postMessage({type:"SKIP_WAITING"})})})}function je(e){pe(e),setInterval(()=>{pe(e)},H.updateCheckInterval)}async function pe(e){try{await e.update();let n=await fetch("/_products/product_data.json",{cache:"no-store",headers:{Accept:"application/json"}});if(n.ok){let u=(await n.json()).version,c=localStorage.getItem("productDataVersion");u!==c&&(e.active?.postMessage({type:"INVALIDATE_PRODUCT_CACHE"}),localStorage.setItem("productDataVersion",u),We(null,"New product data available"))}}catch(n){console.warn("Update check failed:",n)}}function Re(){let e=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{e||(e=!0,window.location.reload())})}function Ue(){let e=()=>{let n=document.getElementById("offline-indicator");if(n){let i=navigator.onLine;n.classList.toggle("is-hidden",i)}navigator.onLine||Fe("You are currently offline. Some features may be limited.")};window.addEventListener("online",e),window.addEventListener("offline",e),e()}function We(e,n="Una versi\xF3n est\xE1 disponible"){let i=Q(n,"Actualizar ahora","Despu\xE9s",()=>{e?e.postMessage({type:"SKIP_WAITING"}):window.location.reload()});V(i)}function He(e){let n=Q(e,"Reload","Dismiss",()=>window.location.reload());V(n)}function Fe(e){let n=Q(e,"Retry","Dismiss",()=>window.location.reload());V(n)}function Q(e,n,i,u){let c=document.createElement("div");return c.className="notification-toast",c.setAttribute("role","alert"),c.setAttribute("aria-live","polite"),c.innerHTML=`
        <div class="notification-content">
            <p>${e}</p>
            <div class="notification-actions">
                <button class="primary-action">${n}</button>
                <button class="secondary-action">${i}</button>
            </div>
        </div>
    `,c.querySelector(".primary-action").addEventListener("click",()=>{u(),c.remove()}),c.querySelector(".secondary-action").addEventListener("click",()=>{c.remove()}),c}function V(e){let n=document.querySelector(".notification-toast");n&&n.remove(),document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&e.remove()},300*1e3)}typeof navigator<"u"&&"serviceWorker"in navigator&&fe();var Ke=(e,n=100)=>{let i=new Map;return(...u)=>{let c=JSON.stringify(u);if(i.has(c))return i.get(c);let f=e(...u);if(i.size>=n){let g=i.keys().next().value;i.delete(g)}return i.set(c,f),f}},Qe=(e,n)=>{let i;return(...u)=>{clearTimeout(i),i=setTimeout(()=>e(...u),n)}},F=e=>{if(!e)return"";try{return String(e).normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}catch{return String(e).toLowerCase()}},ye=e=>{let n=`${e.name}-${e.category}`.toLowerCase(),i=0;for(let u=0;u<n.length;u++){let c=n.charCodeAt(u);i=(i<<5)-i+c,i=i&i}return`pid-${Math.abs(i)}`},W=e=>{let n=document.createElement("div");return n.textContent=e,n.innerHTML},Ve=async()=>{try{let e=localStorage.getItem("productDataVersion"),n=e?`/_products/product_data.json?v=${encodeURIComponent(e)}`:"/_products/product_data.json",i=await fetch(n,{cache:"no-store",headers:{Accept:"application/json"}});if(!i.ok)throw new Error(`HTTP error. Status: ${i.status}`);return(await i.json()).products.map(c=>({...c,id:ye(c),name:W(c.name),description:W(c.description),category:W(c.category),categoryKey:F(c.category)}))}catch(e){throw console.error("Error al obtener productos:",e),h(`Error al cargar los productos. Por favor, verifique su conexi\xF3n a internet e int\xE9ntelo de nuevo. (Error: ${e.message})`),e}},l=(e,n={},i=[])=>{let u=document.createElement(e);return Object.entries(n).forEach(([c,f])=>{c==="text"?u.textContent=f:u.setAttribute(c,f)}),i.forEach(c=>{typeof c=="string"?u.appendChild(document.createTextNode(c)):u.appendChild(c)}),u},h=e=>{let n=l("div",{class:"error-message",role:"alert"},[l("p",{},[e]),l("button",{class:"retry-button"},["Intentar nuevamente"])]),i=document.getElementById("product-container");i?(i.innerHTML="",i.appendChild(n),n.querySelector(".retry-button").addEventListener("click",ge)):console.error("Contenedor de productos no encontrado")};typeof window<"u"&&(window.__APP_READY__=!1,window.addEventListener("error",e=>{let n=e.target||e.srcElement,i=!!(n&&(n.tagName==="IMG"||n.tagName==="SCRIPT"||n.tagName==="LINK")),u=!!e.error;if(i||!u){console.warn("Ignored non-fatal error:",{tag:n&&n.tagName,src:n&&(n.src||n.href||n.currentSrc)});return}if(!window.__APP_READY__){console.error("Runtime error before app ready:",e.error);return}console.error("Unhandled JS error:",e.error),h("Ocurri\xF3 un error inesperado. Por favor, recarga la p\xE1gina.")}),window.addEventListener("securitypolicyviolation",e=>{console.warn("CSP violation (logged only):",{blockedURI:e.blockedURI,violatedDirective:e.violatedDirective,sourceFile:e.sourceFile})}));var ge=async()=>{if(console.log("Initializing app..."),typeof DOMPurify>"u")try{await new Promise((t,a)=>{let r=document.createElement("script");r.src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.8/purify.min.js",r.onload=t,r.onerror=a,document.head.appendChild(r)})}catch{console.warn("DOMPurify CDN blocked; using noop sanitizer"),window.DOMPurify={sanitize:a=>a}}let e=document.getElementById("navbar-container"),n=document.getElementById("footer-container"),i=document.getElementById("product-container"),u=document.getElementById("sort-options"),c=document.getElementById("filter-keyword"),f=()=>{let t=document.getElementById("filter-discount");if(t)return t;let a=document.querySelector('section[aria-label*="filtrado"], section[aria-label*="Opciones de filtrado"]'),r=a?a.querySelector(".row"):null;if(!r)return null;let s=l("div",{class:"col-12 mt-2"}),o=l("div",{class:"form-check form-switch"}),d=l("input",{class:"form-check-input",type:"checkbox",id:"filter-discount","aria-label":"Mostrar solo productos con descuento"}),m=l("label",{class:"form-check-label",for:"filter-discount"},["Solo productos con descuento"]);return o.appendChild(d),o.appendChild(m),s.appendChild(o),r.appendChild(s),d},g=[],y=JSON.parse(localStorage.getItem("cart"))||[],B=()=>{let t=document.getElementById("offline-indicator");t&&t.classList.toggle("is-hidden",navigator.onLine),navigator.onLine||console.log("App is offline. Using cached data if available.")},G=async(t,a)=>{if(!t){console.warn(`Contenedor no encontrado para el componente: ${a}`);return}try{let r=await fetch(a);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);let s=await r.text(),o=DOMPurify.sanitize(s,{USE_PROFILES:{html:!0},ALLOWED_TAGS:["div","span","p","h1","h2","h3","h4","h5","h6","ul","ol","li","a","img","br","strong","em","button","nav","footer","header","main","section"],ALLOWED_ATTR:["href","src","alt","class","id","style","aria-label","role","type","data-bs-toggle","data-bs-target","aria-controls","aria-expanded"]});t.innerHTML="";let m=new DOMParser().parseFromString(o,"text/html");Array.from(m.body.children).forEach(p=>{t.appendChild(p.cloneNode(!0))})}catch(r){throw console.error("Error al cargar componente:",{component:a,message:r.message}),r}},we=async()=>{try{await Promise.all([G(e,"/pages/navbar.html"),G(n,"/pages/footer.html")]),console.log("Components loaded successfully")}catch(t){console.error("Error al cargar componentes:",t),h("Error al cargar los componentes de la p\xE1gina. Por favor, actualice la p\xE1gina o verifique su conexi\xF3n a internet.")}},be=(t,a,r="CLP")=>{let s=new Intl.NumberFormat("es-CL",{style:"currency",currency:r,minimumFractionDigits:0}),o=s.format(t);if(a){let d=t-a,m=s.format(d);return l("div",{class:"precio-container"},[l("span",{class:"precio-descuento","aria-label":"Precio con descuento"},[m]),l("span",{class:"precio-original","aria-label":"Precio original"},[l("span",{class:"tachado"},[o])])])}return l("div",{class:"precio-container"},[l("span",{class:"precio","aria-label":"Precio"},[o])])},Ce=t=>{let a=l("div",{class:"quantity-control"}),r=l("button",{class:"quantity-btn","aria-label":"Decrease quantity"},["-"]),s=l("button",{class:"quantity-btn","aria-label":"Increase quantity"},["+"]),o=l("input",{type:"number",class:"quantity-input",value:Math.max(z(t.id),1),min:"1",max:"50","aria-label":"Quantity","data-id":t.id});return r.addEventListener("click",()=>x(t,-1)),s.addEventListener("click",()=>x(t,1)),o.addEventListener("change",d=>{let m=parseInt(d.target.value,10),p=z(t.id);x(t,m-p)}),a.appendChild(r),a.appendChild(o),a.appendChild(s),a},z=t=>{let a=y.find(r=>r.id===t);return a?a.quantity:0},Ee=t=>{let a=document.createDocumentFragment(),r=window.location.pathname.includes("/pages/");t.forEach(o=>{let{id:d,name:m,description:p,image_path:w,price:$,discount:P,stock:U}=o,M=l("div",{class:`producto col-12 col-sm-6 col-md-4 col-lg-3 mb-4 ${U?"":"agotado"}`,"aria-label":`Product: ${m}`}),k=l("div",{class:"card"});if(P&&Number(P)>0){let S=Math.round(Number(P)/Number($)*100),qe=l("span",{class:"discount-badge badge bg-danger","aria-label":"Producto en oferta"},[`-${isFinite(S)?S:0}%`]);k.appendChild(qe)}let b;r?b=`../${w.replace(/^\//,"")}`:b=w;let C=l("img",{"data-src":b,alt:m,class:"card-img-top lazyload",loading:"lazy",decoding:"async",width:"400",height:"400"});k.appendChild(C);let E=l("div",{class:"card-body"});E.appendChild(l("h3",{class:"card-title"},[m])),E.appendChild(l("p",{class:"card-text"},[p])),E.appendChild(be($,P));let v=l("div",{class:"action-area","data-pid":d}),A=l("button",{class:"btn btn-primary add-to-cart-btn mt-2","data-id":d,"aria-label":`Add ${m} to cart`},["Agregar al carrito"]);A.addEventListener("click",()=>{J(o,1),L(d,!0)});let D=Ce(o);D.style.display="none",v.appendChild(A),v.appendChild(D),E.appendChild(v);let O=y.find(S=>S.id===d),N=O?O.quantity:0;if(N>0){let S=D.querySelector(".quantity-input");S&&(S.value=N),L(d,!0)}else L(d,!1);k.appendChild(E),M.appendChild(k),a.appendChild(M)});let s=document.getElementById("product-container");s.innerHTML="",s.appendChild(a),Se()},Se=()=>{let t=new IntersectionObserver((a,r)=>{a.forEach(s=>{if(s.isIntersecting){let o=s.target;o.src=o.dataset.src,o.classList.remove("lazyload"),r.unobserve(o)}})},{rootMargin:"100px"});document.querySelectorAll("img.lazyload").forEach(a=>t.observe(a))},Le=(t,a,r,s=!1)=>t.filter(o=>(o.name.toLowerCase().includes(a.toLowerCase())||o.description.toLowerCase().includes(a.toLowerCase()))&&o.stock&&(!s||o.discount&&Number(o.discount)>0)).sort((o,d)=>Ie(o,d,r)),Ie=(t,a,r)=>{if(!r||r==="original")return t.originalIndex-a.originalIndex;let[s,o]=r.split("-"),d=s==="price"?t.price-(t.discount||0):t.name.toLowerCase(),m=s==="price"?a.price-(a.discount||0):a.name.toLowerCase();return o==="asc"?d<m?-1:d>m?1:0:m<d?-1:m>d?1:0},Pe=Ke(Le),j=()=>{try{let t=u.value||"original",a=c.value.trim(),r=document.getElementById("filter-discount")?.checked||!1,s=Pe(g,a,t,r);Ee(s)}catch(t){console.error("Error al actualizar visualizaci\xF3n de productos:",t),h("Error al actualizar la visualizaci\xF3n de productos. Por favor, intenta m\xE1s tarde.")}},R=Qe(j,300),q=()=>{let t=document.getElementById("cart-count"),a=y.reduce((r,s)=>r+s.quantity,0);t.textContent=a,t.setAttribute("aria-label",`${a} items in cart`)},J=(t,a)=>{try{let r=y.find(o=>o.id===t.id);r?r.quantity=Math.min(r.quantity+a,50):y.push({id:t.id,name:t.name,description:t.description,price:t.price,discount:t.discount,image_path:t.image_path,quantity:Math.min(a,50),category:t.category,stock:t.stock}),T(),q(),I();let s=document.querySelector(`[data-id="${t.id}"].quantity-input`);s&&(s.value=Math.max(z(t.id),1))}catch(r){console.error("Error al agregar al carrito:",r),h("Error al agregar el art\xEDculo al carrito. Por favor, intenta nuevamente.")}},Y=t=>{try{y=y.filter(a=>a.id!==t),T(),q(),I(),L(t,!1)}catch(a){console.error("Error al eliminar del carrito:",a),h("Error al eliminar el art\xEDculo del carrito. Por favor, intenta nuevamente.")}},x=(t,a)=>{try{let r=y.find(o=>o.id===t.id),s=r?r.quantity+a:1;if(s<=0)Y(t.id),L(t.id,!1);else if(s<=50){r?r.quantity=s:(J(t,1),L(t.id,!0)),T(),q(),I();let o=document.querySelector(`[data-id="${t.id}"].quantity-input`);o&&(o.value=s,o.classList.add("quantity-changed"),setTimeout(()=>o.classList.remove("quantity-changed"),300))}}catch(r){console.error("Error al actualizar cantidad:",r),h("Error al actualizar la cantidad. Por favor, intenta nuevamente.")}},ke=()=>{try{y=[],T(),q(),I(),j()}catch(t){console.error("Error al vaciar el carrito:",t),h("Error al vaciar el carrito. Por favor, int\xE9ntelo de nuevo.")}},L=(t,a)=>{let r=document.querySelector(`.action-area[data-pid="${t}"]`);if(!r)return;let s=r.querySelector(".btn.btn-primary"),o=r.querySelector(".quantity-control");!s||!o||(a?(s.style.display="none",o.style.display="flex"):(o.style.display="none",s.style.display="flex"))},T=()=>{try{localStorage.setItem("cart",JSON.stringify(y))}catch(t){console.error("Error al guardar el carrito:",t),h("Error al guardar el carrito. Tus cambios podr\xEDan no persistir.")}},I=()=>{let t=document.getElementById("cart-items"),a=document.getElementById("cart-total");t.innerHTML="";let r=0;y.forEach(o=>{let d=o.price-(o.discount||0),m=l("div",{class:"cart-item mb-3 d-flex align-items-start","aria-label":`Cart item: ${o.name}`}),p=l("div",{class:"cart-item-content flex-grow-1"});p.appendChild(l("div",{class:"fw-bold mb-1"},[o.name]));let w=l("div",{class:"mb-2"}),$=l("button",{class:"btn btn-sm btn-secondary decrease-quantity","data-id":o.id,"aria-label":`Disminuir cantidad de ${o.name}`},["-"]),P=l("button",{class:"btn btn-sm btn-secondary increase-quantity","data-id":o.id,"aria-label":`Aumentar cantidad de ${o.name}`},["+"]),U=l("span",{class:"mx-2 item-quantity","aria-label":`Cantidad de ${o.name}`},[o.quantity.toString()]);w.appendChild($),w.appendChild(U),w.appendChild(P),p.appendChild(w),p.appendChild(l("div",{class:"text-muted small"},[`Precio: $${d.toLocaleString("es-CL")}`])),p.appendChild(l("div",{class:"fw-bold"},[`Subtotal: $${(d*o.quantity).toLocaleString("es-CL")}`]));let M=l("button",{class:"btn btn-sm btn-danger remove-item mt-2","data-id":o.id,"aria-label":`Eliminar ${o.name} del carrito`},["Eliminar"]);p.appendChild(M);let k=window.location.pathname.includes("/pages/"),b;k?b=`../${o.image_path.replace(/^\//,"")}`:b=o.image_path;let C=l("div",{class:"cart-item-thumb ms-3 flex-shrink-0"}),E=l("img",{src:b,alt:o.name,class:"cart-item-thumb-img",loading:"lazy",decoding:"async",width:"72",height:"72"});if(C.appendChild(E),m.appendChild(p),m.appendChild(C),t.appendChild(m),window.__DEBUG_CART__)try{let v=window.getComputedStyle(m),A=window.getComputedStyle(C),D=window.getComputedStyle(p),O=C.getBoundingClientRect(),N=p.getBoundingClientRect();console.debug("[cart] item",{name:o.name,order:{firstIsContent:m.firstChild===p,lastIsThumb:m.lastChild===C},container:{display:v.display,flexDirection:v.flexDirection,flexWrap:v.flexWrap},thumb:{width:A.width,height:A.height,rect:{w:O.width,h:O.height}},content:{rect:{w:N.width,h:N.height}}})}catch{}r+=d*o.quantity}),a.textContent=`Total: $${r.toLocaleString("es-CL")}`,a.setAttribute("aria-label",`Total: $${r.toLocaleString("es-CL")}`);let s=document.getElementById("payment-credit-container");if(s)if(r>=3e4)s.classList.remove("d-none");else{s.classList.add("d-none");let o=s.querySelector("input");o&&(o.checked=!1)}},_e=()=>{let t=document.querySelector('input[name="paymentMethod"]:checked');if(!t){alert("Por favor seleccione un m\xE9todo de pago");return}let a=`Mi pedido:

`;y.forEach(o=>{let d=o.price-(o.discount||0);a+=`${o.name}
`,a+=`Cantidad: ${o.quantity}
`,a+=`Precio unitario: $${d.toLocaleString("es-CL")}
`,a+=`Subtotal: $${(d*o.quantity).toLocaleString("es-CL")}

`});let r=y.reduce((o,d)=>o+(d.price-(d.discount||0))*d.quantity,0);a+=`Total: $${r.toLocaleString("es-CL")}
`,a+=`M\xE9todo de pago: ${t.value}`;let s=encodeURIComponent(a);window.open(`https://wa.me/56951118901?text=${s}`,"_blank")};try{if(await we(),g=await Ve(),g.length===0){h("No hay productos disponibles. Por favor, intenta m\xE1s tarde.");return}let t=document.querySelector("main").dataset.category;if(t){let d=F(t);g=g.filter(m=>(m.categoryKey||F(m.category))===d)}u.addEventListener("change",R),c.addEventListener("input",R);let a=f();a&&a.addEventListener("change",R),j(),typeof window<"u"&&(window.__APP_READY__=!0),window.addEventListener("online",B),window.addEventListener("offline",B),B();let r=document.getElementById("cart-icon"),s=document.getElementById("empty-cart"),o=document.getElementById("submit-cart");r.addEventListener("click",()=>{if(typeof window.bootstrap<"u"&&window.bootstrap.Offcanvas){let d=new window.bootstrap.Offcanvas(document.getElementById("cartOffcanvas"));I(),d.show()}else{console.error("Bootstrap Offcanvas no est\xE1 disponible"),I();let d=document.getElementById("cartOffcanvas");d&&d.classList.add("show")}}),s.addEventListener("click",ke),o.addEventListener("click",_e),document.getElementById("cart-items").addEventListener("click",d=>{let m=d.target,p=m.closest("[data-id]")?.dataset.id;p&&(m.classList.contains("decrease-quantity")?x({id:p},-1):m.classList.contains("increase-quantity")?x({id:p},1):m.classList.contains("remove-item")&&Y(p))}),q(),"performance"in window&&window.addEventListener("load",()=>{let d=performance.getEntriesByType("paint"),m=performance.getEntriesByType("navigation")[0];console.log("First Contentful Paint:",d[0].startTime),console.log("DOM Content Loaded:",m.domContentLoadedEventEnd),console.log("Load Time:",m.loadEventEnd)})}catch(t){console.error("Error al inicializar productos:",t),h("Error al cargar productos. Por favor, int\xE9ntelo m\xE1s tarde.")}};typeof document<"u"&&document.addEventListener("DOMContentLoaded",function(){fe(),ge().catch(e=>{console.error("Error al inicializar la aplicaci\xF3n:",e),h("Error al inicializar la aplicaci\xF3n. Por favor, actualice la p\xE1gina.")})});typeof K<"u"&&(K.exports={generateStableId:ye})});var Ge=X(()=>{te();oe();re();se();le();me();var lt=Me(he());function ve(){let e=document.documentElement;try{document.querySelectorAll('link[rel="stylesheet"][media="print"][data-defer]').forEach(n=>{n.media="all",n.removeAttribute("data-defer")})}catch{}e.dataset.enhancementsInit!=="1"&&(e.dataset.enhancementsInit="1",ee(),ue(),ne(),ae(),ce(),ie(),de())}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",ve):ve()});Ge();})();
