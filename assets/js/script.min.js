(()=>{var Oe=Object.create;var ee=Object.defineProperty;var $e=Object.getOwnPropertyDescriptor;var Ne=Object.getOwnPropertyNames;var Te=Object.getPrototypeOf,Me=Object.prototype.hasOwnProperty;var x=(e,o)=>()=>(e&&(o=e(e=0)),o);var te=(e,o)=>()=>(o||e((o={exports:{}}).exports,o),o.exports);var De=(e,o,i,u)=>{if(o&&typeof o=="object"||typeof o=="function")for(let c of Ne(o))!Me.call(e,c)&&c!==i&&ee(e,c,{get:()=>o[c],enumerable:!(u=$e(o,c))||u.enumerable});return e};var ze=(e,o,i)=>(i=e!=null?Oe(Te(e)):{},De(o||!e||!e.__esModule?ee(i,"default",{value:e,enumerable:!0}):i,e));function ne(){try{let e=document.createElement("style");window&&window.__CSP_NONCE__&&e.setAttribute("nonce",window.__CSP_NONCE__),e.textContent=`
      /* Miniatura del carrito (mantener consistente con base/enhanced CSS) */
      .cart-item-thumb { width: 100px; height: 100px; flex-shrink: 0; }
      .cart-item-thumb img, .cart-item-thumb-img { width: 100%; height: 100%; object-fit: cover; border-radius: 0.25rem; }

      /* Contornos de enfoque claros para accesibilidad */
      .navbar .nav-link:focus,
      .navbar .dropdown-item:focus {
        outline: 2px solid var(--primary-color);
        outline-offset: 2px;
      }

      /* Espaciado entre botones en el offcanvas del carrito */
      #cartOffcanvas .offcanvas-body > .btn + .btn { margin-top: 0.5rem !important; }
    `,document.head.appendChild(e)}catch(e){console.warn("[modules/enhancements] injectEnhancementStyles error:",e)}}var oe=x(()=>{});function ae(){try{document.addEventListener("keydown",o=>{o.key==="Tab"&&document.body.classList.add("keyboard-navigation")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")});let e=document.createElement("style");window&&window.__CSP_NONCE__&&e.setAttribute("nonce",window.__CSP_NONCE__),e.textContent=".keyboard-navigation *:focus { outline: 2px solid var(--primary-color); outline-offset: 2px; }",document.head.appendChild(e)}catch(e){console.warn("[modules/a11y] setupNavigationAccessibility error:",e)}}var re=x(()=>{});function ie(){try{"loading"in HTMLImageElement.prototype&&document.querySelectorAll("img:not([loading])").forEach(e=>{e.loading="lazy"})}catch(e){console.warn("[modules/perf] setupPerformanceOptimizations error:",e)}}var ce=x(()=>{});async function Be(){try{let e=localStorage.getItem("productDataVersion"),o=e?`/_products/product_data.json?v=${encodeURIComponent(e)}`:"/_products/product_data.json",i=await fetch(o,{cache:"no-store",headers:{Accept:"application/json"}});if(!i.ok)return null;let u=await i.json(),c=Array.isArray(u?.products)?u.products:Array.isArray(u)?u:[],f={};return c.forEach(w=>{let g=w.id||String(w.name)+"-"+String(w.category);f[g]=w}),f}catch(e){return console.error("[modules/seo] Error loading product data:",e),null}}async function se(){try{let e=await Be();if(!e)return;let i=Object.values(e).slice(0,20).map(f=>({"@type":"Product",name:f.name,image:f.image_path,description:f.description,brand:f.brand||"Gen\xE9rico",offers:{"@type":"Offer",price:f.price,priceCurrency:"CLP",availability:f.stock?"https://schema.org/InStock":"https://schema.org/OutOfStock"}})),u={"@context":"https://schema.org","@graph":[{"@type":"Store",name:"El Rinc\xF3n de \xC9bano",image:"https://elrincondeebano.com/assets/images/web/logo.webp",description:"Un minimarket en la puerta de tu departamento",address:{"@type":"PostalAddress",addressCountry:"CL"},telephone:"+56951118901",url:"http://www.elrincondeebano.com/"},...i]},c=document.createElement("script");c.type="application/ld+json",window&&window.__CSP_NONCE__&&c.setAttribute("nonce",window.__CSP_NONCE__),c.textContent=JSON.stringify(u),document.head.appendChild(c)}catch(e){console.error("[modules/seo] Error generating structured data:",e)}}function de(){try{if(!document.querySelector('link[rel="canonical"]')){let e=document.createElement("link");e.rel="canonical",e.href=location.origin+location.pathname,document.head.appendChild(e)}if(!document.querySelector('meta[name="description"]')){let e=document.createElement("meta");e.name="description",e.content="El Rinc\xF3n de \xC9bano - Minimarket con delivery instant\xE1neo.",document.head.appendChild(e)}}catch(e){console.warn("[modules/seo] injectSeoMetadata error:",e)}}var le=x(()=>{});function ue(){try{if(!document.querySelector('link[rel="manifest"]')){let e=document.createElement("link");e.rel="manifest",e.href="/app.webmanifest",document.head.appendChild(e)}}catch(e){console.warn("[modules/pwa] injectPwaManifest error:",e)}}var me=x(()=>{});function pe(){try{window?.console?.debug&&console.debug("[modules/checkout] setupCheckoutProgress: no-op")}catch{}}var fe=x(()=>{});var ve=te((rt,Q)=>{"use strict";var F={path:"/service-worker.js",scope:"/",updateCheckInterval:3e5};function ye(){if(!("serviceWorker"in navigator)){console.warn("Service workers are not supported in this browser");return}window.addEventListener("load",async()=>{try{je()}catch(e){console.error("Service Worker initialization failed:",e),Ke("Failed to initialize service worker. Some features may not work offline.")}})}async function je(){try{let e=await navigator.serviceWorker.register(F.path,{scope:F.scope});console.log("ServiceWorker registered successfully:",e.scope),Re(e),Ue(e),We(),He()}catch(e){throw console.error("ServiceWorker registration failed:",e),e}}function Re(e){e.addEventListener("updatefound",()=>{let o=e.installing;o.addEventListener("statechange",()=>{o.state==="installed"&&navigator.serviceWorker.controller&&o.postMessage({type:"SKIP_WAITING"})})})}function Ue(e){ge(e),setInterval(()=>{ge(e)},F.updateCheckInterval)}async function ge(e){try{await e.update();let o=await fetch("/_products/product_data.json",{cache:"no-store",headers:{Accept:"application/json"}});if(o.ok){let u=(await o.json()).version,c=localStorage.getItem("productDataVersion");u!==c&&(e.active?.postMessage({type:"INVALIDATE_PRODUCT_CACHE"}),localStorage.setItem("productDataVersion",u),Fe(null,"New product data available"))}}catch(o){console.warn("Update check failed:",o)}}function We(){let e=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{e||(e=!0,window.location.reload())})}function He(){let e=()=>{let o=document.getElementById("offline-indicator");if(o){let i=navigator.onLine;o.classList.toggle("is-hidden",i)}navigator.onLine||Qe("You are currently offline. Some features may be limited.")};window.addEventListener("online",e),window.addEventListener("offline",e),e()}function Fe(e,o="Una versi\xF3n est\xE1 disponible"){let i=V(o,"Actualizar ahora","Despu\xE9s",()=>{e?e.postMessage({type:"SKIP_WAITING"}):window.location.reload()});G(i)}function Ke(e){let o=V(e,"Reload","Dismiss",()=>window.location.reload());G(o)}function Qe(e){let o=V(e,"Retry","Dismiss",()=>window.location.reload());G(o)}function V(e,o,i,u){let c=document.createElement("div");return c.className="notification-toast",c.setAttribute("role","alert"),c.setAttribute("aria-live","polite"),c.innerHTML=`
        <div class="notification-content">
            <p>${e}</p>
            <div class="notification-actions">
                <button class="primary-action">${o}</button>
                <button class="secondary-action">${i}</button>
            </div>
        </div>
    `,c.querySelector(".primary-action").addEventListener("click",()=>{u(),c.remove()}),c.querySelector(".secondary-action").addEventListener("click",()=>{c.remove()}),c}function G(e){let o=document.querySelector(".notification-toast");o&&o.remove(),document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&e.remove()},300*1e3)}typeof navigator<"u"&&"serviceWorker"in navigator&&ye();var Ve=(e,o=100)=>{let i=new Map;return(...u)=>{let c=JSON.stringify(u);if(i.has(c))return i.get(c);let f=e(...u);if(i.size>=o){let w=i.keys().next().value;i.delete(w)}return i.set(c,f),f}},Ge=(e,o)=>{let i;return(...u)=>{clearTimeout(i),i=setTimeout(()=>e(...u),o)}},K=e=>{if(!e)return"";try{return String(e).normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}catch{return String(e).toLowerCase()}},he=e=>{let o=`${e.name}-${e.category}`.toLowerCase(),i=0;for(let u=0;u<o.length;u++){let c=o.charCodeAt(u);i=(i<<5)-i+c,i=i&i}return`pid-${Math.abs(i)}`},H=e=>{let o=document.createElement("div");return o.textContent=e,o.innerHTML},Je=async()=>{try{let e=localStorage.getItem("productDataVersion"),o=e?`/_products/product_data.json?v=${encodeURIComponent(e)}`:"/_products/product_data.json",i=await fetch(o,{cache:"no-store",headers:{Accept:"application/json"}});if(!i.ok)throw new Error(`HTTP error. Status: ${i.status}`);return(await i.json()).products.map(c=>({...c,id:he(c),name:H(c.name),description:H(c.description),category:H(c.category),categoryKey:K(c.category)}))}catch(e){throw console.error("Error al obtener productos:",e),v(`Error al cargar los productos. Por favor, verifique su conexi\xF3n a internet e int\xE9ntelo de nuevo. (Error: ${e.message})`),e}},l=(e,o={},i=[])=>{let u=document.createElement(e);return Object.entries(o).forEach(([c,f])=>{c==="text"?u.textContent=f:u.setAttribute(c,f)}),i.forEach(c=>{typeof c=="string"?u.appendChild(document.createTextNode(c)):u.appendChild(c)}),u},v=e=>{let o=l("div",{class:"error-message",role:"alert"},[l("p",{},[e]),l("button",{class:"retry-button"},["Intentar nuevamente"])]),i=document.getElementById("product-container");i?(i.innerHTML="",i.appendChild(o),o.querySelector(".retry-button").addEventListener("click",we)):console.error("Contenedor de productos no encontrado")};typeof window<"u"&&(window.__APP_READY__=!1,window.addEventListener("error",e=>{let o=e.target||e.srcElement,i=!!(o&&(o.tagName==="IMG"||o.tagName==="SCRIPT"||o.tagName==="LINK")),u=!!e.error;if(i||!u){console.warn("Ignored non-fatal error:",{tag:o&&o.tagName,src:o&&(o.src||o.href||o.currentSrc)});return}if(!window.__APP_READY__){console.error("Runtime error before app ready:",e.error);return}console.error("Unhandled JS error:",e.error),v("Ocurri\xF3 un error inesperado. Por favor, recarga la p\xE1gina.")}),window.addEventListener("securitypolicyviolation",e=>{console.warn("CSP violation (logged only):",{blockedURI:e.blockedURI,violatedDirective:e.violatedDirective,sourceFile:e.sourceFile})}));var we=async()=>{if(console.log("Initializing app..."),typeof DOMPurify>"u")try{await new Promise((n,a)=>{let r=document.createElement("script");r.src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.8/purify.min.js",r.onload=n,r.onerror=a,document.head.appendChild(r)})}catch{console.warn("DOMPurify CDN blocked; using noop sanitizer"),window.DOMPurify={sanitize:a=>a}}let e=document.getElementById("navbar-container"),o=document.getElementById("footer-container"),i=document.getElementById("product-container"),u=document.getElementById("sort-options"),c=document.getElementById("filter-keyword"),f=()=>{let n=document.getElementById("filter-discount");if(n)return n;let a=document.querySelector('section[aria-label*="filtrado"], section[aria-label*="Opciones de filtrado"]'),r=a?a.querySelector(".row"):null;if(!r)return null;let s=l("div",{class:"col-12 mt-2"}),t=l("div",{class:"form-check form-switch"}),d=l("input",{class:"form-check-input",type:"checkbox",id:"filter-discount","aria-label":"Mostrar solo productos con descuento"}),m=l("label",{class:"form-check-label",for:"filter-discount"},["Solo productos con descuento"]);return t.appendChild(d),t.appendChild(m),s.appendChild(t),r.appendChild(s),d},w=[],g=JSON.parse(localStorage.getItem("cart"))||[],z=()=>{let n=document.getElementById("offline-indicator");n&&n.classList.toggle("is-hidden",navigator.onLine),navigator.onLine||console.log("App is offline. Using cached data if available.")},J=async(n,a)=>{if(!n){console.warn(`Contenedor no encontrado para el componente: ${a}`);return}try{let r=await fetch(a);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);let s=await r.text(),t=DOMPurify.sanitize(s,{USE_PROFILES:{html:!0},ALLOWED_TAGS:["div","span","p","h1","h2","h3","h4","h5","h6","ul","ol","li","a","img","br","strong","em","button","nav","footer","header","main","section"],ALLOWED_ATTR:["href","src","alt","class","id","style","aria-label","role","type","data-bs-toggle","data-bs-target","aria-controls","aria-expanded"]});n.innerHTML="";let m=new DOMParser().parseFromString(t,"text/html");Array.from(m.body.children).forEach(p=>{n.appendChild(p.cloneNode(!0))})}catch(r){throw console.error("Error al cargar componente:",{component:a,message:r.message}),r}},Ce=async()=>{try{await Promise.all([J(e,"/pages/navbar.html"),J(o,"/pages/footer.html")]),console.log("Components loaded successfully")}catch(n){console.error("Error al cargar componentes:",n),v("Error al cargar los componentes de la p\xE1gina. Por favor, actualice la p\xE1gina o verifique su conexi\xF3n a internet.")}},Ee=(n,a,r="CLP")=>{let s=new Intl.NumberFormat("es-CL",{style:"currency",currency:r,minimumFractionDigits:0}),t=s.format(n);if(a){let d=n-a,m=s.format(d);return l("div",{class:"precio-container"},[l("span",{class:"precio-descuento","aria-label":"Precio con descuento"},[m]),l("span",{class:"precio-original","aria-label":"Precio original"},[l("span",{class:"tachado"},[t])])])}return l("div",{class:"precio-container"},[l("span",{class:"precio","aria-label":"Precio"},[t])])},Se=n=>{let a=l("div",{class:"quantity-control"}),r=l("button",{class:"quantity-btn","aria-label":"Decrease quantity"},["-"]),s=l("button",{class:"quantity-btn","aria-label":"Increase quantity"},["+"]),t=l("input",{type:"number",class:"quantity-input",value:Math.max(B(n.id),1),min:"1",max:"50","aria-label":"Quantity","data-id":n.id});return r.addEventListener("click",()=>O(n,-1)),s.addEventListener("click",()=>O(n,1)),t.addEventListener("change",d=>{let m=parseInt(d.target.value,10),p=B(n.id);O(n,m-p)}),a.appendChild(r),a.appendChild(t),a.appendChild(s),a},B=n=>{let a=g.find(r=>r.id===n);return a?a.quantity:0},Le=n=>{let a=document.createDocumentFragment(),r=window.location.pathname.includes("/pages/");n.forEach(t=>{let{id:d,name:m,description:p,image_path:L,price:M,discount:k,stock:U}=t,D=l("div",{class:`producto col-12 col-sm-6 col-md-4 col-lg-3 mb-4 ${U?"":"agotado"}`,"aria-label":`Product: ${m}`}),q=l("div",{class:"card"});if(k&&Number(k)>0){let h=Math.round(Number(k)/Number(M)*100),b=l("span",{class:"discount-badge badge bg-danger","aria-label":"Producto en oferta"},[`-${isFinite(h)?h:0}%`]);q.appendChild(b)}let I;r?I=`../${L.replace(/^\//,"")}`:I=L;let E={"data-src":I,alt:m,class:"card-img-top lazyload",loading:"lazy",decoding:"async",width:"400",height:"400"};if(Array.isArray(t.image_variants)){let h=t.image_variants.filter(b=>b&&b.url&&b.width).sort((b,Ae)=>b.width-Ae.width).map(b=>`${r?`../${String(b.url).replace(/^\//,"")}`:b.url} ${b.width}w`);h.length&&(E["data-srcset"]=h.join(", "),E["data-sizes"]="(max-width: 576px) 45vw, (max-width: 992px) 30vw, 25vw")}let X=l("img",E);q.appendChild(X);let S=l("div",{class:"card-body"});S.appendChild(l("h3",{class:"card-title"},[m])),S.appendChild(l("p",{class:"card-text"},[p])),S.appendChild(Ee(M,k));let $=l("div",{class:"action-area","data-pid":d}),C=l("button",{class:"btn btn-primary add-to-cart-btn mt-2","data-id":d,"aria-label":`Add ${m} to cart`},["Agregar al carrito"]);C.addEventListener("click",()=>{Y(t,1),P(d,!0)});let y=Se(t);y.style.display="none",$.appendChild(C),$.appendChild(y),S.appendChild($);let W=g.find(h=>h.id===d),N=W?W.quantity:0;if(N>0){let h=y.querySelector(".quantity-input");h&&(h.value=N),P(d,!0)}else P(d,!1);q.appendChild(S),D.appendChild(q),a.appendChild(D)});let s=document.getElementById("product-container");s.innerHTML="",s.appendChild(a),Ie()},Ie=()=>{let n=new IntersectionObserver((a,r)=>{a.forEach(s=>{if(s.isIntersecting){let t=s.target;t.src=t.dataset.src,t.dataset.srcset&&(t.srcset=t.dataset.srcset),t.dataset.sizes&&(t.sizes=t.dataset.sizes),t.classList.remove("lazyload"),r.unobserve(t)}})},{rootMargin:"100px"});document.querySelectorAll("img.lazyload").forEach(a=>n.observe(a))},Pe=(n,a,r,s=!1)=>n.filter(t=>(t.name.toLowerCase().includes(a.toLowerCase())||t.description.toLowerCase().includes(a.toLowerCase()))&&t.stock&&(!s||t.discount&&Number(t.discount)>0)).sort((t,d)=>_e(t,d,r)),_e=(n,a,r)=>{if(!r||r==="original")return n.originalIndex-a.originalIndex;let[s,t]=r.split("-"),d=s==="price"?n.price-(n.discount||0):n.name.toLowerCase(),m=s==="price"?a.price-(a.discount||0):a.name.toLowerCase();return t==="asc"?d<m?-1:d>m?1:0:m<d?-1:m>d?1:0},ke=Ve(Pe),j=()=>{try{let n=u.value||"original",a=c.value.trim(),r=document.getElementById("filter-discount")?.checked||!1,s=ke(w,a,n,r);Le(s)}catch(n){console.error("Error al actualizar visualizaci\xF3n de productos:",n),v("Error al actualizar la visualizaci\xF3n de productos. Por favor, intenta m\xE1s tarde.")}},R=Ge(j,300),A=()=>{let n=document.getElementById("cart-count"),a=g.reduce((r,s)=>r+s.quantity,0);n.textContent=a,n.setAttribute("aria-label",`${a} items in cart`)},Y=(n,a)=>{try{let r=g.find(t=>t.id===n.id);r?r.quantity=Math.min(r.quantity+a,50):g.push({id:n.id,name:n.name,description:n.description,price:n.price,discount:n.discount,image_path:n.image_path,quantity:Math.min(a,50),category:n.category,stock:n.stock}),T(),A(),_();let s=document.querySelector(`[data-id="${n.id}"].quantity-input`);s&&(s.value=Math.max(B(n.id),1))}catch(r){console.error("Error al agregar al carrito:",r),v("Error al agregar el art\xEDculo al carrito. Por favor, intenta nuevamente.")}},Z=n=>{try{g=g.filter(a=>a.id!==n),T(),A(),_(),P(n,!1)}catch(a){console.error("Error al eliminar del carrito:",a),v("Error al eliminar el art\xEDculo del carrito. Por favor, intenta nuevamente.")}},O=(n,a)=>{try{let r=g.find(t=>t.id===n.id),s=r?r.quantity+a:1;if(s<=0)Z(n.id),P(n.id,!1);else if(s<=50){r?r.quantity=s:(Y(n,1),P(n.id,!0)),T(),A(),_();let t=document.querySelector(`[data-id="${n.id}"].quantity-input`);t&&(t.value=s,t.classList.add("quantity-changed"),setTimeout(()=>t.classList.remove("quantity-changed"),300))}}catch(r){console.error("Error al actualizar cantidad:",r),v("Error al actualizar la cantidad. Por favor, intenta nuevamente.")}},qe=()=>{try{g=[],T(),A(),_(),j()}catch(n){console.error("Error al vaciar el carrito:",n),v("Error al vaciar el carrito. Por favor, int\xE9ntelo de nuevo.")}},P=(n,a)=>{let r=document.querySelector(`.action-area[data-pid="${n}"]`);if(!r)return;let s=r.querySelector(".btn.btn-primary"),t=r.querySelector(".quantity-control");!s||!t||(a?(s.style.display="none",t.style.display="flex"):(t.style.display="none",s.style.display="flex"))},T=()=>{try{localStorage.setItem("cart",JSON.stringify(g))}catch(n){console.error("Error al guardar el carrito:",n),v("Error al guardar el carrito. Tus cambios podr\xEDan no persistir.")}},_=()=>{let n=document.getElementById("cart-items"),a=document.getElementById("cart-total");n.innerHTML="";let r=0;g.forEach(t=>{let d=t.price-(t.discount||0),m=l("div",{class:"cart-item mb-3 d-flex align-items-start","aria-label":`Cart item: ${t.name}`}),p=l("div",{class:"cart-item-content flex-grow-1"});p.appendChild(l("div",{class:"fw-bold mb-1"},[t.name]));let L=l("div",{class:"mb-2"}),M=l("button",{class:"btn btn-sm btn-secondary decrease-quantity","data-id":t.id,"aria-label":`Disminuir cantidad de ${t.name}`},["-"]),k=l("button",{class:"btn btn-sm btn-secondary increase-quantity","data-id":t.id,"aria-label":`Aumentar cantidad de ${t.name}`},["+"]),U=l("span",{class:"mx-2 item-quantity","aria-label":`Cantidad de ${t.name}`},[t.quantity.toString()]);L.appendChild(M),L.appendChild(U),L.appendChild(k),p.appendChild(L),p.appendChild(l("div",{class:"text-muted small"},[`Precio: $${d.toLocaleString("es-CL")}`])),p.appendChild(l("div",{class:"fw-bold"},[`Subtotal: $${(d*t.quantity).toLocaleString("es-CL")}`]));let D=l("button",{class:"btn btn-sm btn-danger remove-item mt-2","data-id":t.id,"aria-label":`Eliminar ${t.name} del carrito`},["Eliminar"]);p.appendChild(D);let q=window.location.pathname.includes("/pages/"),I;q?I=`../${t.image_path.replace(/^\//,"")}`:I=t.image_path;let E=l("div",{class:"cart-item-thumb ms-3 flex-shrink-0"}),S={src:t.thumbnail_path||I,alt:t.name,class:"cart-item-thumb-img",loading:"lazy",decoding:"async",width:"100",height:"100"};if(Array.isArray(t.thumbnail_variants)){let C=t.thumbnail_variants.filter(y=>y&&y.url&&y.width).map(y=>`${y.url} ${y.width}w`);C.length&&(S.srcset=C.join(", "),S.sizes="100px")}let $=l("img",S);if(E.appendChild($),m.appendChild(p),m.appendChild(E),n.appendChild(m),window.__DEBUG_CART__)try{let C=window.getComputedStyle(m),y=window.getComputedStyle(E),W=window.getComputedStyle(p),N=E.getBoundingClientRect(),h=p.getBoundingClientRect();console.debug("[cart] item",{name:t.name,order:{firstIsContent:m.firstChild===p,lastIsThumb:m.lastChild===E},container:{display:C.display,flexDirection:C.flexDirection,flexWrap:C.flexWrap},thumb:{width:y.width,height:y.height,rect:{w:N.width,h:N.height}},content:{rect:{w:h.width,h:h.height}}})}catch{}r+=d*t.quantity}),a.textContent=`Total: $${r.toLocaleString("es-CL")}`,a.setAttribute("aria-label",`Total: $${r.toLocaleString("es-CL")}`);let s=document.getElementById("payment-credit-container");if(s)if(r>=3e4)s.classList.remove("d-none");else{s.classList.add("d-none");let t=s.querySelector("input");t&&(t.checked=!1)}},xe=()=>{let n=document.querySelector('input[name="paymentMethod"]:checked');if(!n){alert("Por favor seleccione un m\xE9todo de pago");return}let a=`Mi pedido:

`;g.forEach(t=>{let d=t.price-(t.discount||0);a+=`${t.name}
`,a+=`Cantidad: ${t.quantity}
`,a+=`Precio unitario: $${d.toLocaleString("es-CL")}
`,a+=`Subtotal: $${(d*t.quantity).toLocaleString("es-CL")}

`});let r=g.reduce((t,d)=>t+(d.price-(d.discount||0))*d.quantity,0);a+=`Total: $${r.toLocaleString("es-CL")}
`,a+=`M\xE9todo de pago: ${n.value}`;let s=encodeURIComponent(a);window.open(`https://wa.me/56951118901?text=${s}`,"_blank")};try{if(await Ce(),w=await Je(),w.length===0){v("No hay productos disponibles. Por favor, intenta m\xE1s tarde.");return}let n=document.querySelector("main").dataset.category;if(n){let d=K(n);w=w.filter(m=>(m.categoryKey||K(m.category))===d)}u.addEventListener("change",R),c.addEventListener("input",R);let a=f();a&&a.addEventListener("change",R),j(),typeof window<"u"&&(window.__APP_READY__=!0),window.addEventListener("online",z),window.addEventListener("offline",z),z();let r=document.getElementById("cart-icon"),s=document.getElementById("empty-cart"),t=document.getElementById("submit-cart");r.addEventListener("click",()=>{if(typeof window.bootstrap<"u"&&window.bootstrap.Offcanvas){let d=new window.bootstrap.Offcanvas(document.getElementById("cartOffcanvas"));_(),d.show()}else{console.error("Bootstrap Offcanvas no est\xE1 disponible"),_();let d=document.getElementById("cartOffcanvas");d&&d.classList.add("show")}}),s.addEventListener("click",qe),t.addEventListener("click",xe),document.getElementById("cart-items").addEventListener("click",d=>{let m=d.target,p=m.closest("[data-id]")?.dataset.id;p&&(m.classList.contains("decrease-quantity")?O({id:p},-1):m.classList.contains("increase-quantity")?O({id:p},1):m.classList.contains("remove-item")&&Z(p))}),A(),"performance"in window&&window.addEventListener("load",()=>{let d=performance.getEntriesByType("paint"),m=performance.getEntriesByType("navigation")[0];console.log("First Contentful Paint:",d[0].startTime),console.log("DOM Content Loaded:",m.domContentLoadedEventEnd),console.log("Load Time:",m.loadEventEnd)})}catch(n){console.error("Error al inicializar productos:",n),v("Error al cargar productos. Por favor, int\xE9ntelo m\xE1s tarde.")}};typeof document<"u"&&document.addEventListener("DOMContentLoaded",function(){ye(),we().catch(e=>{console.error("Error al inicializar la aplicaci\xF3n:",e),v("Error al inicializar la aplicaci\xF3n. Por favor, actualice la p\xE1gina.")})});typeof Q<"u"&&(Q.exports={generateStableId:he})});var Ye=te(()=>{oe();re();ce();le();me();fe();var mt=ze(ve());function be(){let e=document.documentElement;try{document.querySelectorAll('link[rel="stylesheet"][media="print"][data-defer]').forEach(o=>{o.media="all",o.removeAttribute("data-defer")})}catch{}e.dataset.enhancementsInit!=="1"&&(e.dataset.enhancementsInit="1",ne(),pe(),ae(),ie(),de(),se(),ue())}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",be):be()});Ye();})();
