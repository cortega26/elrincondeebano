Quick Wins (Ranked 1-5)
1) Kill CLS by aligning critical vs main CSS (navbar/hero/cards)
What breaks today if this is not fixed: Navbar height and brand image size shift after CSS loads, causing layout shift and mis-taps on first paint.
Root cause: `assets/css/critical.css` and `assets/css/style.css` use different padding/sizing for `.navbar`, `.navbar-brand img`, `.brand-text`, and `.hero-section`.
Why this is a quick win: Local CSS alignment only, no JS or checkout changes, fully reversible.
Estimated effort: S
Expected payoff: Performance (CLS), UX Consistency, Trust
Implementation outline: In `assets/css/critical.css`, mirror final values from `assets/css/style.css` for `.navbar` padding/min-height, `.navbar-brand img` width/height, `.navbar-brand span` font-size, `.hero-section` padding/min-height, `body` padding-top, and `#cart-count` min size. Add any missing `min-height` or padding in `assets/css/style.css` so both files match.

2) Normalize product image framing across PLP and category cards
What breaks today if this is not fixed: Mixed cropping/letterboxing across breakpoints and inconsistent card heights, which reduces perceived quality.
Root cause: Conflicting rules (`.producto img` fixed height and `object-fit: contain` vs `.product-thumb` `object-fit: cover` and `aspect-ratio: 1/1`).
Why this is a quick win: CSS-only change localized to product card images.
Estimated effort: S
Expected payoff: UX Consistency, Performance (CLS), Conversion
Implementation outline: In `assets/css/style.css` (and matching in `assets/css/critical.css`), set `.product-thumb` to `aspect-ratio: 1 / 1`, `width: 100%`, `height: auto`, `object-fit: contain`, and `background-color: var(--surface-muted)`. Remove or override `.producto img` fixed height or convert it to a breakpointed `max-height`. Keep `width`/`height` attributes at 400 to preserve intrinsic size.

3) Make filter controls consistent between index and category pages
What breaks today if this is not fixed: Sort dropdown styles differ across pages and wrap differently on mobile, which feels unstable.
Root cause: Index uses `.form-select` while category uses `.form-control` for the same control; CSS targets them unevenly.
Why this is a quick win: One template class change; no JS logic changes.
Estimated effort: S
Expected payoff: UX Consistency, Maintainability
Implementation outline: In `templates/category.ejs`, change the sort select to `class="form-select"` to match index. Keep ids/labels intact so JS continues to bind.

4) Hide cart badge until initialized to avoid header jitter
What breaks today if this is not fixed: Empty badge appears then jumps to a number; header shifts and distracts during first paint.
Root cause: `#cart-count` is empty until JS runs; no visibility rule for the pre-init state.
Why this is a quick win: Single CSS rule, no cart logic changes.
Estimated effort: S
Expected payoff: UX Consistency, Accessibility
Implementation outline: In `assets/css/style.css`, add `#cart-count[data-initialized="0"] { visibility: hidden; }` while keeping `min-width/min-height`. Optionally add `aria-live="polite"` to `#cart-count` in `templates/partials/navbar.ejs` for better announcements.

5) Align viewport meta across templates
What breaks today if this is not fixed: Inconsistent zoom and layout behavior between home and category pages; accessibility zoom differs.
Root cause: `templates/index.ejs` uses `maximum-scale=5, user-scalable=yes` while `templates/category.ejs` uses a basic viewport string.
Why this is a quick win: One-line change, zero risk to checkout or cart.
Estimated effort: S
Expected payoff: UX Consistency, Accessibility
Implementation outline: Update the category viewport meta to match index (`width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes`) in `templates/category.ejs`.

Strategic Priorities (Ranked 1-5)
1) Service worker caching can serve stale prices/inventory
What the system does: `service-worker.js` caches HTML, product data, and dynamic requests with TTLs (products 5 min, dynamic 12h).
How it can fail (and business impact): Users see stale availability/prices or outdated catalogs, leading to cart disappointment and trust loss.
Current technical or UX smell: Most HTML falls into the dynamic cache and can be served from cache; offline fallback can mask real failures.
Why it is a true priority: Directly impacts conversion and trust; issues can be silent until complaints.
Recommended direction: Use network-first for HTML and product JSON with short TTL, explicit versioning for `product_data.json`, and `no-store` for price/inventory endpoints; keep static assets cache-first.
What NOT to do: Do not cache checkout flows, do not increase TTLs for product data, do not rely on SW to mask backend errors.

2) Client-only cart/checkout path is fragile
What the system does: Cart is localStorage-only; checkout opens WhatsApp with a built message (`src/js/modules/checkout.mjs`).
How it can fail (and business impact): Private browsing/storage errors or blocked popups cause silent checkout failure; orders are lost.
Current technical or UX smell: No server-side fallback, no dedicated checkout page, no persistence beyond one device.
Why it is a true priority: This is the money path; reliability gaps directly lose revenue.
Recommended direction: Add a minimal server-side or static order summary page with copy/share fallback; add robust error UI when `window.open` is blocked; version the cart schema in storage.
What NOT to do: Do not add complex multi-step checkout or payment changes without validation; do not store sensitive data client-side.

3) Image pipeline and srcset strategy lacks a single source of truth
What the system does: SSR uses `product.image.sizes`; JS uses `PRODUCT_IMAGE_SIZES` in `src/js/modules/ui-components.mjs`; images are transformed via Cloudflare.
How it can fail (and business impact): Wrong image size selection, blurry or oversized images, higher LCP, inconsistent crop across SSR vs JS render.
Current technical or UX smell: Two independent `sizes` definitions and mixed `object-fit` rules; no enforcement that `srcset` widths match layout.
Why it is a true priority: Images dominate LCP and perceived quality on product grids.
Recommended direction: Define one canonical sizes string and use it in both SSR and JS; validate that `srcset` widths match actual layout widths; standardize `object-fit` choice.
What NOT to do: Do not ship larger default widths or remove `width`/`height` attributes.

4) CSS architecture drift between critical, main, and enhanced styles
What the system does: Critical CSS (`assets/css/critical.css`) and main CSS (`assets/css/style.css`) both define core layout; `assets/css/style-enhanced.css` is a divergent design system.
How it can fail (and business impact): Regressions and CLS reappear after routine tweaks; layout differs across pages depending on CSS load order.
Current technical or UX smell: Duplicated selectors with mismatched values and an unused enhanced file that can leak into builds.
Why it is a true priority: Small CSS changes can cause broad regressions in a live store.
Recommended direction: Establish a single source of truth for tokens and layout values; add a build check to diff critical vs main for key selectors; remove unused CSS from build output.
What NOT to do: Do not attempt a full redesign or swap CSS frameworks.

5) Catalog loading and filtering is JS-heavy with weak SEO fallbacks
What the system does: Client-side filtering/sorting and infinite load via IntersectionObserver in `src/js/modules/catalog-manager.mjs`.
How it can fail (and business impact): Inconsistent discoverability for crawlers and users; long lists can become heavy on low-end devices; loss of deep-linkable views.
Current technical or UX smell: No URL-based pagination or filter state; "Load more" is hidden until JS runs.
Why it is a true priority: PLP stability and SEO are conversion levers; failures are silent.
Recommended direction: Add optional query-param pagination or static page variants; keep "Load more" as progressive enhancement; expose filter state in the URL for shareability.
What NOT to do: Do not rely exclusively on infinite scroll or remove the "Load more" button.

Scoring Table
ID | Item | Impact | Effort | Risk Reduction | Confidence | Priority Score
QW1 | Align critical vs main CSS for CLS | 4 | 1 | 4 | 4 | 64.0
QW2 | Normalize product image framing | 4 | 2 | 4 | 4 | 32.0
QW3 | Consistent filter controls | 3 | 1 | 2 | 4 | 24.0
QW4 | Hide cart badge until initialized | 2 | 1 | 2 | 4 | 16.0
QW5 | Align viewport meta | 2 | 1 | 2 | 4 | 16.0
SP1 | Service worker caching strategy | 5 | 3 | 5 | 4 | 33.3
SP2 | Client-only cart/checkout fragility | 5 | 4 | 5 | 4 | 25.0
SP3 | Image pipeline single source of truth | 4 | 3 | 4 | 4 | 21.3
SP4 | CSS architecture drift | 4 | 3 | 4 | 3 | 16.0
SP5 | JS-heavy catalog without pagination | 4 | 4 | 3 | 3 | 9.0

Final Recommendation Summary
If only 3 things get done this quarter, do these first:
1) Fix service worker caching strategy for HTML/product data to prevent stale pricing/inventory.
2) Harden the client-only checkout path with a fallback order summary and popup-block handling.
3) Unify the image sizing/framing source of truth (sizes + CSS) to stabilize LCP and card consistency.
